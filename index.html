<!DOCTYPE HTML><html style="height:100%;width:100%;background-color:black"><head><title>BrainBoxFun</title>
<meta name = "viewport" content = "user-scalable=no,width=device-width" />

<script language="Javascript">
// localStorage.clear()

var defaultnumberexercisesperset=5

var restartconfirmationrequired=0
var adfrequency=1
var adsrequired=1
var appname='bbfun'
window.onbeforeunload=checkforunload;

function checkforunload()
{
if (exercisenumber>0 && exercisenumber<11)
{
return "Confirmation of leaving page"
}
}

function changetextvalue(someitem, someval)
{
document.getElementById(someitem).innerHTML = someval
}

function documentwrite(someitem)
{
document.write(someitem)
}


var thedate = new Date();
var thenow = thedate.getTime();
 
var thelater=thenow+2000

while (thedate.getTime()<thelater)
{
thedate=new Date()
}

var thewindowsizes=[window.innerWidth, window.innerHeight,document.documentElement.clientWidth, document.documentElement.clientHeight]

var scalef
var screenwidth=document.documentElement.clientWidth
var screenheight=document.documentElement.clientHeight
var overallwidthscale=screenwidth/230
var overallheightscale=screenheight/367
if (overallwidthscale<overallheightscale) {scalef=Math.floor(10*overallwidthscale)/10} else {scalef=Math.floor(10*overallheightscale)/10}
if (scalef<1.0) {scalef=1.0}

documentwrite('<style type="text/css">      \nbody {color: black; background-color: black; font-family: sans-serif; font-size: '+(scalef*12)+'px; font-weight: normal; font-style: normal; text-align: left}      \nh1 {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: bold; font-style: normal; text-align: left} \nh2 {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: italic; text-align: left} \np {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; text-align: left} \nli {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; text-align: left} \ntable {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; text-align: left} \ntd {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; } \ntextarea {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; overflow:hidden;} \ninput {font-family: sans-serif; font-size: '+(scalef*10)+'px; font-weight: normal; font-style: normal; } \n * {-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}</style> \n')

// common code


// Local storage
// SetLocalVal and GetLocalVal - use cookies of available, if not local storage
// Reason: for testing, local storage doesn't seem to work.  On devices, local storage works but not always cookies.  Should cover everything.

var daystoExpire = 2000;
var expirydate = new Date(); 
expirydate.setTime(expirydate.getTime() + (daystoExpire*24*60*60*1000));


function GetCookie(name) 
{  
var thecookie=document.cookie
var namestring = name+'='  
var cookieval = null
var cookievalbeg=-1
var cookievalend=thecookie.length
for (var beg=0; beg<thecookie.length; beg++)
{
var end=beg+namestring.length
if (thecookie.substring(beg, end) == namestring)
{
cookievalbeg=end
}
}
if (cookievalbeg > -1)
{
cookievalend=thecookie.indexOf(';', cookievalbeg) // look for next ; after beginning of value
if (cookievalend == -1) (cookievalend = thecookie.length)
cookieval = unescape(thecookie.substring(cookievalbeg, cookievalend))
} 

return cookieval
}


function SetCookie(name, val) 
{  
var cookiestring = name+'='+escape(val)+'; expires='+ expirydate.toGMTString()
document.cookie=cookiestring
}

var usecookies=1
SetCookie('dummy', 'answer')
if (GetCookie('dummy')==null) {usecookies=0}
usecookies=0 // now use only local storage
</script>
<script language="Javascript">
// checks whether local storage works.  Often doesn't with Internet Explorer
var localstorageworks=0
localStorage.setItem('testcheck', '43')
if (localStorage.getItem('testcheck')=='43') {localstorageworks=1}

</script>
<script language="Javascript">


</script>
<script language="Javascript">
var localstoragesubstitute=[]

function SetLocalStorageSubstitute(someitem, someval)
{
someval=someval+''
var someset=0
for (var i=0; i<localstoragesubstitute.length; i++)
{
if (localstoragesubstitute[i][0]==someitem)
{
localstoragesubstitute[i][1]=someval
someset=1
break
}
}
if (someset==0) {localstoragesubstitute=localstoragesubstitute.concat([[someitem, someval]])}
}

function GetLocalStorageSubstitute(someitem)
{
for (var i=0; i<localstoragesubstitute.length; i++)
{
if (localstoragesubstitute[i][0]==someitem)
{
return localstoragesubstitute[i][1]
}
}
return null
}
</script>
<script language="Javascript">

function SetLocalVal(somename, someval)
{
if (usecookies==1) 
{
SetCookie(somename, someval)
}
else
{
if (localstorageworks==1)
{
localStorage.setItem(appname+somename, someval)
}
else
{
SetLocalStorageSubstitute(somename, someval)
}
}
}

function GetLocalVal(somename)
{
if (usecookies==1) 
{
return GetCookie(somename)
}
else
{
if (localstorageworks==1)
{
return localStorage.getItem(appname+somename)
}
else
{
return GetLocalStorageSubstitute(somename)
}
}
}
// end Local Storage





// From loader above

function setexercisesperset(somenum)
{
currentnumberexercises=somenum
SetLocalVal('exercisesperset', somenum)
}


function savescoresascookie()
{

SetLocalVal('thescores', thescores)

}


function loadtheapp()
{
if (GetLocalVal("thescores") !=null)
{
eval('thescores=['+GetLocalVal("thescores")+']')
}
else
{
thescores=[0,0,0,0,0,0,0,0,0,0,0]
}
}

// end from Loader above




var currentnumberexercises=GetLocalVal('exercisesperset')
if (currentnumberexercises==null || currentnumberexercises>defaultnumberexercisesperset) {currentnumberexercises=defaultnumberexercisesperset} else {currentnumberexercises=currentnumberexercises*1}
SetLocalVal('exercisesperset', currentnumberexercises)

var exercises=
[
['', 'Introduction', [0, 0, 0, 0, 0], 'Welcome to BrainBoxFun: 10 sets of exercises, with up to '+defaultnumberexercisesperset+' exercises per set (currently '+currentnumberexercises+' per set). Score 1 point for each correct answer.', [


], 0],
[1, 'Low-High', [3, 4, 5, 6, 7],'You will see some tiles with different numbers on them, plus 1 or 2 blank ones.  During the countdown, memorize the order of the tiles, lowest to highest.' , [[0,0,"lightbluetile4"],[0,4,"lightbluetile8"],[2,2,"lightbluetile5"],[3,5,"lightbluetile9"],[4,8,"lightbluetilespace"],[8,10,"lightbluetile2"]], 8], 
[2, 'Rotations', [12, 14, 16, 18, 20],  'Some of the 3x3 shapes are identical but rotated. Identify all of these and press on them (order unimportant).  OK stops the countdown early.', [[0,0,"violet"],[0,1,"blue"],[0,2,"orange"],[0,4,"white"],[0,5,"violet"],[0,6,"violet"],[0,8,"red"],[0,9,"white"],[0,10,"orange"],[1,0,"violet"],[1,1,"blackhub"],[1,2,"white"],[1,4,"red"],[1,5,"blackhub"],[1,6,"blue"],[1,8,"red"],[1,9,"blackhub"],[1,10,"violet"],[2,0,"white"],[2,1,"red"],[2,2,"red"],[2,4,"red"],[2,5,"white"],[2,6,"orange"],[2,8,"white"],[2,9,"blue"],[2,10,"violet"],[4,0,"red"],[4,1,"white"],[4,2,"orange"],[4,4,"violet"],[4,5,"violet"],[4,6,"orange"],[5,0,"red"],[5,1,"blackhub"],[5,2,"blue"],[5,4,"blue"],[5,5,"blackhub"],[5,6,"white"],[6,0,"white"],[6,1,"violet"],[6,2,"violet"],[6,4,"white"],[6,5,"red"],[6,6,"red"], [10,5,"ok"]], 15], 
[3, 'Jumble', [10, 15, 20, 25, 30],  'The jumbled-up letters of a word are displayed on two lines.  Spell out the word by pressing the letters, one at a time, before the countdown ends.', [[1,1,"blueO"],[2,2,"blueT"],[1,3,"blueU"],[2,4,"blueH"],[1,5,"blueB"],[2,6,"blueG"]], 8], 
[4, 'Arithmetic', [ 7, 9, 11, 13, 17], 'You will be presented with two numbers and an arithmetic operator: +, -, x or ÷. Enter the result using the keypad. The result entered is shown to the right of the = sign.', [[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,3,"white"],[0,4,"white"],[0,5,"white"],[0,6,"white"],[0,7,"white"],[0,8,"white"],[0,9,"white"],[0,10,"white"],[1,0,"white"],[1,1,"white"],[1,2,"white"],[1,3,"white"],[1,4,"white"],[1,5,"red4"],[1,6,"red5"],[1,7,"white"],[1,8,"white"],[1,9,"white"],[1,10,"white"],[2,0,"white"],[2,1,"white"],[2,2,"white"],[2,3,"white"],[2,4,"white"],[2,5,"red3"],[2,6,"red0"],[2,7,"blacksubtract"],[2,8,"white"],[2,9,"white"],[2,10,"white"],[3,0,"white"],[3,1,"white"],[3,2,"white"],[3,3,"white"],[3,4,"white"],[3,5,"white"],[3,6,"white"],[3,7,"white"],[3,8,"white"],[3,9,"white"],[3,10,"white"],[4,0,"white"],[4,1,"blackequals"],[4,2,"white"],[4,3,"white"],[4,4,"white"],[4,5,"white"],[4,6,"white"],[4,7,"white"],[4,8,"white"],[4,9,"white"],[4,10,"white"],
// [6,4,"button1"],[6,5,"button2"],[6,6,"button3"],[7,4,"button4"],[7,5,"button5"],[7,6,"button6"],[8,4,"button7"],[8,5,"button8"],[8,6,"button9"],[9,4,"buttonplusminus"],[9,5,"button0"],[9,6,"buttonC"],[9,7,"ok"]
[6,3,"button1"],[6,5,"button2"],[6,7,"button3"],[7,2,"button4"],[7,4,"button5"],[7,6,"button6"],[7,8,"button7"],[8,3,"button8"],[8,5,"button9"],[8,7,"button0"],[9,4,"buttonplusminus"],[9,6,"buttonC"],[10,5,"ok"]
], 10], 
[5, 'Sequences', [10, 15, 20, 25, 30],  'Four of the 3x3 shapes displayed form a sequence, with central numbers 1-4 in that order. Three are above the grey line.  Press on the missing one below the line.', [[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,4,"violet3"],[0,5,"bluesquare"],[0,6,"white"],[0,8,"white"],[0,9,"white"],[0,10,"red1"],[1,0,"white"],[1,1,"blackhubnumber1"],[1,2,"white"],[1,4,"white"],[1,5,"blackhubnumber2"],[1,6,"white"],[1,8,"white"],[1,9,"blackhubnumber3"],[1,10,"white"],[2,0,"blue5"],[2,1,"orangesquare"],[2,2,"white"],[2,4,"white"],[2,5,"white"],[2,6,"white"],[2,8,"white"],[2,9,"violetsquare"],[2,10,"white"],[3,0,"greyline"],[3,1,"greyline"],[3,2,"greyline"],[3,3,"greyline"],[3,4,"greyline"],[3,5,"greyline"],[3,6,"greyline"],[3,7,"greyline"],[3,8,"greyline"],[3,9,"greyline"],[3,10,"greyline"],[4,0,"white"],[4,1,"white"],[4,2,"white"],[4,4,"white"],[4,5,"redsquare"],[4,6,"white"],[4,8,"white"],[4,9,"redsquare"],[4,10,"white"],[5,0,"redsquare"],[5,1,"blackhubnumber4"],[5,2,"white"],[5,4,"white"],[5,5,"blackhubnumber4"],[5,6,"white"],[5,8,"white"],[5,9,"blackhubnumber4"],[5,10,"white"],[6,0,"white"],[6,1,"white"],[6,2,"orange9"],[6,4,"white"],[6,5,"white"],[6,6,"blue0"],[6,8,"white"],[6,9,"white"],[6,10,"orange9"],[8,0,"white"],[8,1,"violetsquare"],[8,2,"white"],[9,0,"white"],[9,1,"blackhubnumber4"],[9,2,"white"],[10,0,"white"],[10,1,"white"],[10,2,"blue9"]], 10], 
[6, 'Back to Front', [ 8, 11, 15, 19, 23],  'Identify and press the letter sequence that forms a word in a typical dictionary when reversed. Press OK to confirm your selection (shown by >), or else change it.', [[1,1,"blueS"],[1,2,"blueL"],[1,3,"blueW"],[1,4,"blueA"],[1,5,"blueR"],[1,6,"blueD"],[2,1,"blueN"],[2,2,"blueA"],[2,3,"blueI"],[2,4,"blueT"],[2,5,"blueE"],[2,6,"blueD"],[3,1,"blueE"],[3,2,"blueD"],[3,3,"blueB"],[3,4,"blueB"],[3,5,"blueA"],[3,6,"blueD"],[4,1,"blueD"],[4,2,"blueE"],[4,3,"blueK"],[4,4,"blueL"],[4,5,"blueA"],[4,6,"blueF"],[5,1,"blueY"],[5,2,"blueO"],[5,3,"blueS"],[5,4,"blueO"],[5,5,"blueH"],[5,6,"blueC"], [10,5,"ok"]], 12], 
[7, 'Iconic Memories', [4, 5, 6, 7, 8], 'You will first see on the second row down a sequence of images.  The countdown starts immediately, and you should try to remember the order of the images.', [[1,5,"icon3"],[1,6,"icon8"],[1,7,"icon9"],[1,8,"icon6"],[1,9,"icon7"]], 6], 
[8, 'Colour Confusion', [5, 7, 9, 13, 15], 'Words are listed, each the name of one of the colours RED, ORANGE, BLUE or VIOLET.  Their text colours are also these colours - but name/text colour may not match.', [[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,3,"white"],[0,4,"white"],[0,5,"white"],[0,6,"blueR"],[0,7,"blueE"],[0,8,"blueD"],[0,9,"white"],[0,10,"white"],[1,0,"white"],[1,1,"white"],[1,2,"white"],[1,3,"redO"],[1,4,"redR"],[1,5,"redA"],[1,6,"redN"],[1,7,"redG"],[1,8,"redE"],[1,9,"white"],[1,10,"white"],[2,0,"white"],[2,1,"white"],[2,2,"white"],[2,3,"orangeV"],[2,4,"orangeI"],[2,5,"orangeO"],[2,6,"orangeL"],[2,7,"orangeE"],[2,8,"orangeT"],[2,9,"white"],[2,10,"white"],[3,0,"white"],[3,1,"white"],[3,2,"white"],[3,3,"white"],[3,4,"white"],[3,5,"redB"],[3,6,"redL"],[3,7,"redU"],[3,8,"redE"],[3,9,"white"],[3,10,"white"],[4,0,"white"],[4,1,"white"],[4,2,"white"],[4,3,"violetV"],[4,4,"violetI"],[4,5,"violetO"],[4,6,"violetL"],[4,7,"violetE"],[4,8,"violetT"],[4,9,"white"],[4,10,"white"],[5,0,"white"],[5,1,"white"],[5,2,"white"],[5,3,"white"],[5,4,"white"],[5,5,"white"],[5,6,"blueR"],[5,7,"blueE"],[5,8,"blueD"],[5,9,"white"],[5,10,"white"],[6,0,"white"],[6,1,"white"],[6,2,"white"],[6,3,"orangeO"],[6,4,"orangeR"],[6,5,"orangeA"],[6,6,"orangeN"],[6,7,"orangeG"],[6,8,"orangeE"],[6,9,"white"],[6,10,"white"],[10,2,"red"],[10,4,"orange"],[10,6,"blue"],[10,8,"violet"]], 15], 
[9, 'Probability', [ 12, 16, 20, 24, 28], 'Press the number on the right with the highest probability of being the sum of one randomly-drawn blue tile and one randomly-drawn green tile.', [[0,8,"white"],[0,9,"white"],[0,10,"white"],[1,2,"lightbluetile7"],[1,5,"lightgreentile9"],[1,8,"white"],[1,9,"white"],[1,10,"white"],[2,2,"lightbluetile6"],[2,5,"lightgreentile7"],[2,8,"blue1"],[2,9,"blue3"],[2,10,"white"],[3,2,"lightbluetile8"],[3,5,"lightgreentile6"],[3,8,"white"],[3,9,"white"],[3,10,"white"],[4,2,"lightbluetile1"],[4,5,"lightgreentile7"],[4,8,"blue1"],[4,9,"blue0"],[4,10,"white"],[5,8,"white"],[5,9,"white"],[5,10,"white"],[6,8,"white"],[6,9,"blue8"],[6,10,"white"],[7,8,"white"],[7,9,"white"],[7,10,"white"],[8,8,"white"],[8,9,"blue7"],[8,10,"white"],[9,8,"white"],[9,9,"white"],[9,10,"white"],[10,8,"white"],[10,9,"white"],[10,10,"white"]], 10], 
[10, 'Picnic', [8, 12, 16, 20, 24],  'Required items are shown at the bottom. Starting at the top, press and collect an item from each row in turn (moving vertically or diagonally) ending next to the chequered area.', [[0,1,"picnic8"],[0,2,"picnic4"],[0,3,"picnic2"],[0,4,"picnic9"],[0,5,"picnic1"],[0,6,"picnic7"],[0,7,"picnic6"],[0,8,"picnic5"],[0,9,"picnic3"],[1,1,"picnic8"],[1,2,"picnic1"],[1,3,"picnic2"],[1,4,"picnic4"],[1,5,"picnic7"],[1,6,"picnic3"],[1,7,"picnic9"],[1,8,"picnic5"],[1,9,"picnic6"],[2,1,"picnic3"],[2,2,"picnic7"],[2,3,"picnic6"],[2,4,"picnic4"],[2,5,"picnic8"],[2,6,"picnic9"],[2,7,"picnic2"],[2,8,"picnic1"],[2,9,"picnic5"],[3,1,"picnic6"],[3,2,"picnic1"],[3,3,"picnic9"],[3,4,"picnic2"],[3,5,"picnic7"],[3,6,"picnic5"],[3,7,"picnic3"],[3,8,"picnic8"],[3,9,"picnic4"],[4,4,"tablecloth"],[4,5,"tablecloth"],[4,6,"tablecloth"],[6,3,"picnicunknown"],[6,4,"picnic5"],[6,5,"picnic8"],[6,6,"picnic9"],[10,5,"backuparrow"]], 10]
]

var thescores=[0,0,0,0,0,0,0,0,0,0,0]
var exerciseorder=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

var theprofiles  // [ [[Exercise level, Time allowed, Max score this level],.....], Max overall score current profile, Max score ever]
var thecurrentuser
var isnewprofile=0
var thedefaultlevel=2

function setdefaultprofile()
{
var someprofile=[]
theprofiles=[]
var someexercise
var sometime
for (var i=0; i<exerciseorder.length; i++)
{
someexercise=exerciseorder[i]
sometime=exercises[someexercise][2][thedefaultlevel-1]
someprofile[i]=[thedefaultlevel, sometime, 0]
}

theprofiles[0]=[someprofile, 0, 0]
updateprofilecookie()
}

function startupprofile()
{ 
thecurrentuser=0
var someprofiles=GetLocalVal('bprofiles')
if (someprofiles==null || someprofiles.length<5) 
{
setdefaultprofile()
isnewprofile=1
}
else
{
loadprofiles()
}
}

function loadprofiles()
{
theprofiles=eval(GetLocalVal('bprofiles'))

}

function updateprofilecookie()
{
var someprofile=[]
var someprofiles=[]
var sometext
for (var j=0; j<theprofiles.length; j++)
{
someprofile=[]
for (var i=0; i<theprofiles[j][0].length; i++)
{
someprofile[i]='['+theprofiles[j][0][i]+']'
}

someprofiles[j]='[['+someprofile+'],'+theprofiles[j][1]+','+theprofiles[j][2]+']'
}
// alert('['+someprofiles+']')
SetLocalVal('bprofiles', '['+someprofiles+']')
}



startupprofile()




// end of common code

</script>

</head>
<body TOPMARGIN=0 LEFTMARGIN=0 MARGINHEIGHT=0 MARGINWIDTH=0 style="background-color:black; width:100%; height:100%">

<script language="Javascript">


function setdropdownvalue(val)
{
for(var i=0;i<document.all('menu').length;i++)
{
if(document.all('menu').options[i].value==val)
{
document.all('menu').selectedIndex=i
}
}
}

function showpicturesfordownloading()
{

if (document.getElementById('theimages').style.display == 'none')
{document.getElementById('theimages').style.display = 'inline'}
else
{document.getElementById('theimages').style.display = 'none'}



}


var runcheckvalue='ok'
function runcheck()
{
return true
}

function changepage()
{
isnewprofile=0

if (exercisenumber>=0 && exercisenumber<=10)
{
thescores[exercisenumber]=exercisescore
}


savescoresascookie()
showstartad()


// setupexercise(exerciseordernumber)
// reloadindex()

}

function gotohome()
{
if (document.getElementById('addivtotal').style.display=='none' && document.getElementById('help').style.display=='none')
{
exerciseordernumber=0
changepage()

}


}

var helpdisplayed=0
function togglehelp()
{
if (document.getElementById('addivtotal').style.display=='none' && document.getElementById('therestart').style.display=='none')
{
helpdisplayed=1-helpdisplayed
if (helpdisplayed==1) {document.getElementById('help').style.display = 'block'; document.getElementById('thegame').style.display = 'none'}
if (helpdisplayed==0) {document.getElementById('help').style.display = 'none'; document.getElementById('thegame').style.display = 'inline'}
handleclickproblem()
}
}

function startitup()
{
document.getElementById('intro').style.display='none'
document.getElementById('postintro').style.display='inline'
showstartad()

}


</script>

<script language="Javascript">documentwrite('<div id="intro" style="width:100%;display:inline"><table style="background-color:black" align=center valign=middle width=100% height=100%><tr><td valign=middle align=center style="color:white;font-size:'+Math.floor(scalef*14)+'px"><br>Dr Wolstenholme\'s<br><span style="color:purple;font-weight: bold; font-size: '+(scalef*20)+'px">BrainBoxFun<br></span>Brain-training exercises<br><br><br>Tap brain to start<br><br><img align=center valign=middle border=0 onClick="startitup()" src="bbflogo.png" height='+Math.floor(scalef*96)+'><br><br><span style="color:purple">TopAccolades</span></td></tr></table></div><div id="postintro" style="width:100%;display:none"><table border=0 width=100% valign=middle cellspacing=0 style="text-align: left; background-color:purple" align=center><tr><td valign=middle style="width:'+Math.floor(scalef*14)+'px;text-align: left; font-weight: bold; font-size: '+Math.floor(scalef*12)+'px; color: white; vertical-align: middle; background-color:gray"><table border=0 cellpadding=0 align=right><tr><td valign=middle style="height:'+Math.floor(scalef*14)+'px;width:'+Math.floor(scalef*25)+'px;font-size:'+Math.floor(scalef*12)+'px;text-align:center;font-weight:bold;color:black;background-image:url(buttonbg.jpg)" onClick="go2()">&nbsp;Go&nbsp;</td><td id="totalscore2" style="background-color:magenta;color:black;text-align:center;width:'+Math.floor(scalef*20)+'px"></td><td valign=middle>&nbsp;<img src="homeicon.png" width='+Math.floor(scalef*10)+' onClick="gotohome()">&nbsp;</td><td id="timeavailable2" style="background-color:yellow;color:black;text-align:center;width:'+Math.floor(scalef*25)+'px"></td><td valign=middle style="height:'+Math.floor(scalef*14)+'px;width:'+Math.floor(scalef*20)+'px;font-size:'+Math.floor(scalef*12)+'px;text-align:center;font-weight:bold;color:black"  onClick="togglehelp()">?</td></tr></table><table border=0 cellpadding=0 align=left><tr><td style="text-align: left; font-weight: bold; font-size: '+Math.floor(scalef*12)+'px; color: white; vertical-align: middle;" id="titlename">')</script>BrainBoxFun</td></tr></table></td></tr><tr><td style="text-align: left; font-weight: normal; color: black; vertical-align: top">
<div id="therestart" style="width:100%;display:none">
<script language="Javascript">documentwrite('<table cellspacing=0 cellpadding=0 border=0 style="width:'+Math.floor(scalef*220)+'px;height:'+Math.floor(scalef*315)+'px;background-color:white" align=center>')</script>
<tr><td valign=middle style="background-color:white;vertical-align:top">



</td></tr></table></div>
<div id="thegame" style="width:100%;display:inline;background-color:green">
<script language="Javascript">documentwrite('<table border=0 cellpadding=0 cellspacing=0 style="width:'+Math.floor(scalef*220)+'px;background-color:black" align=center>')</script>
<tr><td valign=top style="vertical-align:top">


<script language="Javascript">
// shareddefault
// --------------




var height=11
var width=11

function gettextvalue(someid)
{
return document.getElementById(someid).innerHTML

}

function writescreen(somelist)
{
clearscreen()
for (var i=0; i<somelist.length; i++)
{
changepiece(somelist[i][0], somelist[i][1], somelist[i][2])
}
}

function slightlymutated(somelist1)
{
var somelist=copysimplevalues(somelist1)

var somemax=somelist.length-2
var i=randomnumber(somemax)
if (somelist[i]!=somelist[i+1])
{
var somechar=somelist[i]
somelist[i]=somelist[i+1]
somelist[i+1]=somechar
return somelist
}
else
{
return slightlymutated(somelist1)
}

}

function listismember(somelist, somearray)
{
var somereturn
for (var i=0; i<somearray.length; i++)
{
somereturn=true
for (var j=0; j<somelist.length; j++)
{
if (somelist[j]!=somearray[i][j]) {somereturn=false; break}
}
if (somereturn==true) {return true}

}
return false
}

function charlist(somestring)
{
var someresult=[]
if (somestring.length==0) {return []} else
{return [somestring.substring(0, 1)].concat(charlist(somestring.substring(1)))}
}

function differentjumble(somelist)
{
var somemix=shufflearray(somelist)
var somecheck=0
for (var i=0; i<somelist.length; i++)
{
if (somelist[i]!=somemix[i]) {somecheck++}
}
if (somecheck>=3) {return somemix} else {return differentjumble(somelist)}
}

function ith(someitem, somelist)
{
for (var i=0; i<somelist.length; i++)
{
if (someitem==somelist[i]) {return i}
}
}

function randomnumber(num) {
// returns a random number from 1 to num
var ran=Math.round(Math.random()*num)
if (ran == 0) {ran = num}  // ran initially 0 to num - but 0 and num have half the probability of the other numbers
return ran
}

function randominrange(num1, num2)
{
// num2 >=num1
var somediff=num2-num1
var somerand=randomnumber(somediff+1)
return (num1-1)+somerand
}

function differentrandomnumber(somen, somecheck)
{
var somerandom=randomnumber(somen)
if (somerandom!=somecheck) {return somerandom} else {return differentrandomnumber(somen, somecheck)}
}

function shufflearray(somearray)
{

var temparray=somearray
var shuffled=[]
packsize=somearray.length
var ran
var i
for (var i=0; i<packsize; i++)
{
ran = randomnumber(temparray.length)
shuffled[i] = temparray[ran-1]
temparray = removeElement(ran-1, temparray)
}
return shuffled
}

function removeElement(index, somearray)
{
var beg=somearray.slice(0, index)
var end=[]
if (index+1 < somearray.length) {end = somearray.slice(index+1)}
return beg.concat(end)
}




function tailarray(somearray)
{
return somearray.slice(1, somearray.length)
}

function headarray(somearray)
{
return somearray[0]
}



function empty(array) 
// checks whether an array is empty:  returns true if so, false if not.
{
if (array.length == 0)
     return true  
else
     return false

}

function member(element, array) 
// checks whether element is a member of array:  returns true if so, false if not.
{
var check = false
var i = 0
while (i<array.length && !check){check = array[i]==element; i++};
return check

}

function numbersort(some1, some2)
{
return some1-some2
}

function quantitynums(some1, some2)
{
return some2[1]-some1[1]
}

function makestring(somelist)
{
var somereturn=''
for (var i=0; i<somelist.length; i++)
{
somereturn=somereturn+somelist[i]
}
return somereturn
}

function gifname(row, col)
{
return screenrecord[row][col]

}


function cellindices()
{
var somecells=[]
var someindex=0
for (var i=0; i<height; i++)
{
for (var j=0; j<width; j++)
{
somecells[someindex]=[i, j]
someindex++
}

}
return somecells
}

var exercisenumber=0
var subexercisenumber=0
var exercisescore=0
var exercisescoreposs=0
var totalscore=0
var totalscoreposs=0
var order=[]
var clicksexpected=0
var clicksaccepted=0
var validcells=[]
var orderoriginal=[]
var goal=[]
var answergiven=[]

function showcontexthelp()
{
var newwin=window.open('help.htm#exercise'+exercisenumber,'', 'toolbar=yes,location=no,directories=no,status=no,menubar=yes,scrollbars=yes,resizable=yes,copyhistory=yes')
newwin.document.close()

}

var exercisestate='notrunning'


var exerciseordernumber=0




var thecolours=['red', 'orange', 'blue', 'violet']
var theletters=['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
var thenumerals=[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
var thenumbers=[1, 2, 3, 4, 5, 6, 7, 8, 9] 

function showerror(row, col)
{
if (exercisestate=="selecting")
{
var somereplacegif=gifname(row, col)
changepiece(row, col, 'error')
if (responsetimer != null) {clearTimeout(responsetimer)}
responsetimer= setTimeout('changepiece('+row+', '+col+', "'+somereplacegif+'")', 200)
}

}
var scalefcell=scalef*1.25  // this is because new base cell size is 20 but all dimensions in images are based on size of 16
var cellsize=Math.floor(scalefcell*16)
var thetotalsize=height*cellsize
var screenrecord=[]
function setupboard()
{

var piecename
var sometotalsize=height*cellsize
documentwrite('<div style="position:relative;left:0px;top:0px;width:'+thetotalsize+'px;height:'+(thetotalsize)+'px;background-color:white;">')

for (var i=0; i<height; i++)
{
screenrecord[i]=[]
for (var j=0; j<width; j++)
{

piecename='piece'+i+'_'+j
documentwrite('<div id="gridback'+i+'_'+j+'" style="position:absolute;left:'+((j*cellsize))+'px;top:'+((i*cellsize))+'px;height:'+cellsize+'px;width:'+cellsize+'px;font-weight:bold;text-align:center;vertical-align:middle;background-color:black"><table border=0 cellspacing=0 cellpadding=0><tr><td align=center valign=middle id="'+piecename+'" style="width:'+cellsize+'px;height:'+cellsize+'px;font-size:'+Math.floor(scalefcell*14)+'px;font-weight:bold;color:black;text-align:center" onClick="selectpiece('+i+', '+j+')" >&nbsp;</td></tr></table></div>')
screenrecord[i][j]='black'
}
}


documentwrite('</div>')
}

function clearscreen()
{
for (var i=0; i<height; i++)
{
for (var j=0; j<width; j++)
{
changepiece(i,j,'black')
}
}
if (document.getElementById('thegame').style.display=='inline')
{
document.getElementById('thegame').style.display='none'
document.getElementById('thegame').style.display='inline'
}
}

function changetextvalue(someitem, someval)
{

document.getElementById(someitem).innerHTML = someval

}



function selectpiece(rowi, colj)
{
if (exerciseordernumber>0)
{
if (runcheck()!=true) {return}
}

eval('selectpiece'+exercisenumber+'('+rowi+', '+colj+')')

}



function go2()
{
if (document.getElementById('addivtotal').style.display=='none' && document.getElementById('help').style.display=='none')
{
go()
}

}

function go()
{

if (responsetimer != null) {clearTimeout(responsetimer)}
if (countdowntimer != null) {clearTimeout(countdowntimer)}
exercisestate='notrunning'
if (exerciseordernumber==11)
{
exerciseordernumber=0
changepage()

/*
exerciseordernumber=0
setupexercise(0)
*/
}
else
{
if (exerciseordernumber==0 || subexercisenumber==numberexercisesperset)
{
if (exerciseordernumber>0)
{
updatescores()
}
exerciseordernumber++
changepage()
}
else
{
exercisescoreposs=subexercisenumber
totalscoreposs=numberexercisesperset*(exerciseordernumber-1)+exercisescoreposs
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscoreposs", totalscoreposs)
eval('setupsubexercise'+exercisenumber+'()')
}
}
}


function updatescores()
{
thescores[exerciseordernumber]=exercisescore

}

function gonext()
{
if (responsetimer != null) {clearTimeout(responsetimer)}
if (countdowntimer != null) {clearTimeout(countdowntimer)}
exercisestate='notrunning'
if (exerciseordernumber==11)
{
exerciseordernumber=0
changepage()

}
else
{
if (exerciseordernumber>0)
{
updatescores()
}
exerciseordernumber++
changepage()

}
}


function goback()
{
if (responsetimer != null) {clearTimeout(responsetimer)}
if (countdowntimer != null) {clearTimeout(countdowntimer)}
exercisestate='notrunning'

if (exerciseordernumber==12) // now want to go back to 10 from 11
{
exerciseordernumber=0
changepage()

}
else
{
if (subexercisenumber==0 && exerciseordernumber>0) {thescores[exerciseordernumber-1]=0; exerciseordernumber--; }
changepage()

}
}


var exerciselevel=1
function changeexerciselevel(someval)
{
if (exercisestate=='notrunning'  && exerciseordernumber==0 && document.getElementById("exerciselevel").innerHTML!='')
{
var somenewlevel=thedefaultlevel+someval
if (somenewlevel==6) {somenewlevel=5}
if (somenewlevel==0) {somenewlevel=1}
changetextvalue("exerciselevel", somenewlevel)
thedefaultlevel=somenewlevel
setdefaultprofile()
}


if (exercisestate=='notrunning'  && exerciseordernumber>0 && exerciseordernumber<=10)
{
var somenewlevel=exerciselevel+someval
if (somenewlevel==6) {somenewlevel=5}
if (somenewlevel==0) {somenewlevel=1}
exerciselevel=somenewlevel
changetextvalue("exerciselevel", exerciselevel)
basetimeavailable=exercises[exercisenumber][2][exerciselevel-1]
changetextvalue("basetimeavailable", basetimeavailable)
setexerciseprofile()
}
}


var basetimeavailable=1
var timeavailable
function changetimeavailable(someval)
{
if (exercisestate=='notrunning' && exerciseordernumber>0 && exerciseordernumber<=10)
{
if (basetimeavailable!='')
{
var somenewtime=basetimeavailable+someval
if (somenewtime==0) {somenewtime=1}
if (somenewtime==100) {somenewtime=99}
basetimeavailable=somenewtime
changetextvalue("basetimeavailable", basetimeavailable)
setexerciseprofile()
}
}
}



function setexerciseprofile()
{
theprofiles[thecurrentuser][0][exerciseordernumber][0]=exerciselevel
theprofiles[thecurrentuser][0][exerciseordernumber][1]=basetimeavailable
theprofiles[thecurrentuser][0][exerciseordernumber][2]=0
theprofiles[thecurrentuser][1]=0

updateprofilecookie()
}

var responsetimer
var countdowntimer
function startcountdown()
{
timeavailable=basetimeavailable
var somesecs=Math.floor(timeavailable)
var somedecimal=10*(timeavailable-somesecs)
changetextvalue("timeavailable", somesecs+'.'+somedecimal)
changetextvalue("timeavailable2", somesecs+'.'+somedecimal)

if (countdowntimer != null) {clearTimeout(countdowntimer)}

countdowntimer= setTimeout('countdown()', 100)

}

var countdownend='normal'
function countdown()
{
timeavailable=(10*timeavailable-1)/10
var somesecs=Math.floor(timeavailable)
var somedecimal=Math.round(10*(timeavailable-somesecs))
changetextvalue("timeavailable", somesecs+'.'+somedecimal)
changetextvalue("timeavailable2", somesecs+'.'+somedecimal)
if (timeavailable>0) 
{
if (countdowntimer != null) {clearTimeout(countdowntimer)}

countdowntimer= setTimeout('countdown()', 100)

}
else
{
countdownend='normal'
eval('finish'+exercisenumber+'()')
}

}

function stopcountdownearly()
{
countdownend='early'

clearTimeout(countdowntimer)
eval('finish'+exercisenumber+'()')
}


function copyvalues(somearray)
{
var temparray=[]
for (var i=0; i<somearray.length; i++)
{
temparray[i]=[]
for (var j=0; j<somearray[i].length; j++)
{
temparray[i][j]=somearray[i][j]
}
}
return temparray
}


function copysimplevalues(somearray)
{
var temparray=[]
for (var i=0; i<somearray.length; i++)
{
temparray[i]=somearray[i]
}
return temparray
}

function showexercisewelcome()
{
var somen=exercisenumber
if (somen<10) {somechars=[somen+'']} else {somechars=twochars(somen)}
somelist=[]

for (var i=0; i<somechars.length; i++)
{
somelist[i]=[ 7, 5+i, 'blackyellow'+somechars[i]]
}
somelist=[[1, 2, 'blackyellowW'], [1, 3, 'blackyellowE'], [1, 4, 'blackyellowL'], [1, 5, 'blackyellowC'], [1, 6, 'blackyellowO'], [1, 7, 'blackyellowM'], [1, 8, 'blackyellowE'], [3, 5, 'blackyellowT'], [3, 6, 'blackyellowO'], [5, 2, 'blackyellowE'], [5, 3, 'blackyellowX'], [5, 4, 'blackyellowE'], [5, 5, 'blackyellowR'], [5, 6, 'blackyellowC'], [5, 7, 'blackyellowI'],  [5, 8, 'blackyellowS'], [5, 9, 'blackyellowE']].concat(somelist).concat([[9, 4, 'blackredD'], [9, 5, 'blackredE'], [9, 6, 'blackredM'], [9, 7, 'blackredO']])
writescreen(somelist) 
}

function showexample()
{
changetextvalue("exercisedescription", exercises[exercisenumber][3])

writescreen(exercises[exercisenumber][4])

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("eval('subsidiarysetupexercise'+exercisenumber+'()')", 1000*exercises[exercisenumber][5])

}

function displaycorrecthelp(somen)
{
for (var i=0; i<=11; i++)
{
document.getElementById('help'+i).style.display = 'none'
}
document.getElementById('help'+somen).style.display = 'block'

}


function setupexercise(somen)
{
exercisestate='notrunning'
if (somen==0) {changetextvalue('titlename', 'BrainBoxFun')}
if (somen>0 && somen<11) {changetextvalue('titlename', exercises[somen][1])}
if (somen==11) {changetextvalue('titlename', 'Scores & Profile')}

displaycorrecthelp(somen)
if (somen<=10)
{
subexercisenumber=0
exercisescore=0
exercisescoreposs=0
exerciseordernumber=somen
exercisenumber=somen
subexercisenumber=0
exerciselevel=theprofiles[thecurrentuser][0][exercisenumber][0]
basetimeavailable=theprofiles[thecurrentuser][0][exercisenumber][1]
timeavailable=''
totalscore=0
totalscoreposs=numberexercisesperset*(somen-1); if (totalscoreposs<0) {totalscoreposs=0}
for (var i=somen; i<thescores.length; i++)
{
thescores[i]=0
}
for (var i=1; i<thescores.length; i++)
{
totalscore=totalscore+thescores[i]
}
changetextvalue("exercisedescription", 'If you\'re familiar with these exercises, [Go]<br><br>')
if (exerciseordernumber>0) {changetextvalue("exerciselevel", exerciselevel)} else {changetextvalue("exerciselevel",'')}
if (exerciseordernumber>0) {changetextvalue("basetimeavailable", basetimeavailable)} else {changetextvalue("basetimeavailable", '')}
changetextvalue("timeavailable", '')
changetextvalue("timeavailable2", '')
if (exerciseordernumber>0) {changetextvalue("exerciseordernumber", exerciseordernumber)} else {changetextvalue("exerciseordernumber", '')}
changetextvalue("subexercisenumber", '')
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)

changetextvalue("totalscoreposs", totalscoreposs)
// we deal with words/dictionary even when we don't need to!
thewordsused=[]
thewordlist=[[], [], [], [], [], []]
setupwordlist()
if (somen>0)
{
showexercisewelcome()

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showexample()", 2000)
}
else
{
showexample()
}
}
else // moving to scores/profiles
{
handlescoresandprofile()
}


}

var thewordlist 

function getwordoflength(somelevel)
{

var someindex=somelevel-4
var somelength=thedictionary[someindex].length
var somenumwords=somelength/somelevel
var someran=randomnumber(somenumwords)-1
return thedictionary[someindex].substr(someran*somelevel, somelevel)


}


// Intention is to avoid duplication of words used during one set.  Used for exercise 3 and 6
function setupwordlist()
{
var somewordlength
for (var i=0; i<6; i++)
{
somewordlength=i+4
while (thewordlist[i].length<40)
{
var someword=getwordoflength(somewordlength)
if (member(someword, thewordlist[i])==false) {thewordlist[i]=thewordlist[i].concat([someword])}
}
}
}


function twochars(somenum)
{
if (somenum<10) {return [' ', somenum+'']}
else
{
return charlist(somenum+'')
}
}




var originalimagenames=['blackadd', 'blacksubtract', 'blackmultiply', 'blackdivide', 'blackequals', /* 'icon0', 'icon1', 'icon2', 'icon3', 'icon4', 'icon5', 'icon6', 'icon7', 'icon8', 'icon9', */ 'blackhub', 'correctblackhub', 'wrongblackhub', 'lightbluetilespace', 'greyhub']
var newimagenames=['black+', 'black-', 'blackx', 'black÷', 'black=', /* 'redsquare', 'bluesquare', 'orangesquare', 'violetsquare', 'reddot', 'orangedot', 'bluedot', 'violetdot', 'greendot', 'greensquare', */ 'black', 'blackcorrect', 'blackwrong', 'lightbluetile ', 'gray']

function setthepiece(row, col, someimage)
{
var somechar
somepiece='piece'+row+'_'+col
somebg='gridback'+row+'_'+col
var someborder=Math.floor(scalefcell*1)
if (member(someimage, ['black', 'white', 'red', 'violet', 'yellow', 'blue', 'green', 'orange', 'gray'])==true)
{
document.getElementById(somebg).style.backgroundColor=someimage
document.getElementById(somepiece).innerHTML = ''
return
}
var somecol=someimage.slice(0, someimage.length-1)
if (member(somecol, ['red', 'black', 'violet', 'yellow', 'blue', 'green', 'orange', 'gray'])==true)
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color=somecol
document.getElementById(somepiece).innerHTML = someimage.slice(someimage.length-1)

return
}
if (member(somecol, ['blackred',  'blackviolet', 'blackyellow', 'blackblue', 'blackgreen', 'blackorange', 'blackgray', 'blackwhite'])==true)
{
somecol=somecol.slice(5)
document.getElementById(somebg).style.backgroundColor='black'
document.getElementById(somepiece).style.color=somecol
somechar=someimage.slice(someimage.length-1)
if (somechar=='>') {somechar='&gt;'}
if (somechar=='<') {somechar='&lt;'}

document.getElementById(somepiece).innerHTML = somechar
return
}
if (somecol=='inverse')
{
document.getElementById(somebg).style.backgroundColor='red'
document.getElementById(somepiece).style.color='black'
document.getElementById(somepiece).innerHTML = someimage.slice(someimage.length-1)

return
}
if (somecol=='button')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='red'
document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;background-color:black;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+someborder+'px;left:'+someborder+'px;width:'+(Math.floor(scalefcell*16)-2*someborder)+'px;height:'+(Math.floor(scalefcell*16)-2*someborder)+'px;background-color:white;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div><div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;text-align:center">'+someimage.slice(someimage.length-1)+'</div>'
return

}
if (somecol=='lightgreentile')
{
document.getElementById(somebg).style.backgroundColor='limegreen'
document.getElementById(somepiece).style.color='black'
document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;background-color:black;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+someborder+'px;left:'+someborder+'px;width:'+(Math.floor(scalefcell*16)-2*someborder)+'px;height:'+(Math.floor(scalefcell*16)-2*someborder)+'px;background-color:limegreen;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div><div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;text-align:center">'+someimage.slice(someimage.length-1)+'</div>'
return

}
if (somecol=='lightbluetile')
{
document.getElementById(somebg).style.backgroundColor='cyan'
document.getElementById(somepiece).style.color='black'
document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;background-color:black;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+someborder+'px;left:'+someborder+'px;width:'+(Math.floor(scalefcell*16)-2*someborder)+'px;height:'+(Math.floor(scalefcell*16)-2*someborder)+'px;background-color:cyan;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div><div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;text-align:center">'+someimage.slice(someimage.length-1)+'</div>'
return

}
if (somecol=='blackhubnumber')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='black'
document.getElementById(somepiece).innerHTML = '<span style="font-size:'+Math.floor(scalefcell*11)+'px">'+someimage.slice(someimage.length-1)+'</span>'
return

}
if (somecol=='correctblackhubnumber')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='silver'
// document.getElementById(somepiece).innerHTML = '<span style="font-size:'+Math.floor(scalefcell*11)+'px">'+someimage.slice(someimage.length-1)+'</span>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*5)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*7)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*8)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'
document.getElementById(somepiece).innerHTML = '<span style="font-size:'+Math.floor(scalefcell*11)+'px">'+someimage.slice(someimage.length-1)+'</span>'+'<div style="position:absolute;top:0px;left:'+Math.floor(scalefcell*3)+'px;color:limegreen">&#10004;</div>'
return

}
if (somecol=='wrongblackhubnumber')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='silver'
document.getElementById(somepiece).innerHTML = '<span style="font-size:'+Math.floor(scalefcell*11)+'px">'+someimage.slice(someimage.length-1)+'</span>'+'<div style="position:absolute;top:0px;left:'+Math.floor(scalefcell*3)+'px;color:red">X</div>'
return

}
if (someimage=='leftarrow')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='black'
document.getElementById(somepiece).innerHTML = '&lt;'
return

}
if (someimage=='error')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='red'
document.getElementById(somepiece).innerHTML = '!'
return

}
if (someimage=='whitecorrect')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='limegreen'
// document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6.3)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6.6)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*7)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*8)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'
// document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*5)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*7)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*8)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'
document.getElementById(somepiece).innerHTML = '&#10004;'
return

}
if (someimage=='whitewrong')
{
document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='red'
document.getElementById(somepiece).innerHTML = 'X'
return

}

if (someimage=='blackcorrect')
{
document.getElementById(somebg).style.backgroundColor='black'
document.getElementById(somepiece).style.color='limegreen'
// document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*6)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:'+Math.floor(scalefcell*5)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*10)+'px;font-weight:bold">\\</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*7)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-1)+'px;left:'+Math.floor(scalefcell*8)+'px;color:limegreen;font-size:'+Math.floor(scalefcell*16)+'px;font-weight:bold">/</div>'
document.getElementById(somepiece).innerHTML = '&#10004;'
return

}
if (someimage=='blackwrong')
{
document.getElementById(somebg).style.backgroundColor='black'
document.getElementById(somepiece).style.color='red'
document.getElementById(somepiece).innerHTML = 'X'
return

}
if (someimage=='ok')
{

document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='green'
document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;background-color:black;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+someborder+'px;left:'+someborder+'px;width:'+(Math.floor(scalefcell*16)-2*someborder)+'px;height:'+(Math.floor(scalefcell*16)-2*someborder)+'px;background-color:white;font-size:'+Math.floor(scalefcell*6)+'px"><table border=0 cellpadding=0 cellspacing=0 width='+(Math.floor(scalefcell*16)-2*someborder)+' height='+(Math.floor(scalefcell*16)-2*someborder)+'><tr><td align=center valign=middle style="font-weight:bold;text-align:center;color:green;font-size:'+Math.floor(scalefcell*10)+'px">OK</td></tr></table></div>'



return
}
if (someimage=='orangeok')
{

document.getElementById(somebg).style.backgroundColor='orange'
document.getElementById(somepiece).style.color='black'
// document.getElementById(somepiece).innerHTML ='<div style="position:absolute;top:0px;left:'+Math.floor(scalefcell*1)+'px;color:black;font-size:'+Math.floor(scalefcell*10)+'px">OK</div>'
document.getElementById(somepiece).innerHTML ='<span style="font-size:'+Math.floor(scalefcell*10)+'px">OK</span>'

return
}
if (someimage=='buttonplusminus')
{

document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color='red'
document.getElementById(somepiece).innerHTML = '<div style="position:absolute;top:0px;left:0px;width:'+Math.floor(scalefcell*16)+'px;height:'+Math.floor(scalefcell*16)+'px;background-color:black;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+someborder+'px;left:'+someborder+'px;width:'+(Math.floor(scalefcell*16)-2*someborder)+'px;height:'+(Math.floor(scalefcell*16)-2*someborder)+'px;background-color:white;font-size:'+Math.floor(scalefcell*6)+'px">&nbsp;</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*-2)+'px;left:'+Math.floor(scalefcell*2)+'px;color:red;font-size:'+Math.floor(scalefcell*14)+'px">+</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*5)+'px;left:'+Math.floor(scalefcell*8)+'px;color:red;font-size:'+Math.floor(scalefcell*8)+'px">/</div>'+'<div style="position:absolute;top:'+Math.floor(scalefcell*3)+'px;left:'+Math.floor(scalefcell*9)+'px;color:red;font-size:'+Math.floor(scalefcell*14)+'px">-</div>'



return
}
if (someimage=='greyline')
{
document.getElementById(somebg).style.backgroundColor='black'
document.getElementById(somepiece).innerHTML = '<table style="position:absolute;top:'+Math.floor(scalefcell*4)+'px;left:0px;width:'+(cellsize)+'px;height:'+(cellsize-Math.floor(scalefcell*8))+'px;background-color:silver"><tr><td></td></tr></table>'

return
}

if (member(someimage, ['redsquare', 'bluesquare', 'yellowsquare', 'violetsquare', 'blacksquare', 'greensquare', 'orangesquare'])==true)
{
var somelength=someimage.length
var somecollength=somelength-6
somecol=someimage.slice(0,somecollength)

var somebordersize=Math.floor(scalefcell*2)
var somesquaresize=cellsize-2*somebordersize

document.getElementById(somebg).style.backgroundColor='white'

document.getElementById(somepiece).innerHTML = '<table style="position:absolute;top:'+somebordersize+'px;left:'+somebordersize+'px;width:'+somesquaresize+'px;height:'+somesquaresize+'px;background-color:'+somecol+'"><tr><td></td></tr></table>'

return
}
if (member(someimage, ['reddot', 'bluedot', 'yellowdot', 'violetdot', 'blackdot', 'greendot', 'orangedot'])==true)
{
var somelength=someimage.length
var somecollength=somelength-3
somecol=someimage.slice(0,somecollength)

var somebordersize=Math.floor(scalefcell*2)
var somesquaresize=cellsize-2*somebordersize
var someminorsquaresize=Math.floor(scalefcell*4)
var someminordimension=somesquaresize-2*someminorsquaresize

document.getElementById(somebg).style.backgroundColor='white'
document.getElementById(somepiece).style.color=somecol
document.getElementById(somepiece).innerHTML = '<table style="position:absolute;top:'+somebordersize+'px;left:'+(somebordersize+someminorsquaresize)+'px;width:'+someminordimension+'px;height:'+somesquaresize+'px;background-color:'+somecol+'"><tr><td></td></tr></table>'+'<table style="position:absolute;top:'+(somebordersize+someminorsquaresize)+'px;left:'+somebordersize+'px;width:'+somesquaresize+'px;height:'+someminordimension+'px;background-color:'+somecol+'""><tr><td></td></tr></table>'
return
}

var somei=ith(someimage, originalimagenames)
if (somei>=0) {setthepiece(row, col, newimagenames[somei]); return}
document.getElementById(somepiece).innerHTML = '<img border=0 width='+cellsize+'px height='+cellsize+'px style="display:block" src="'+someimage+'.gif">'


} 

function changepiece(row, col, someimage)
{

setthepiece(row, col, someimage)
screenrecord[row][col]=someimage
}



var thedivs=['maingame', 'more']
function displaydiv(somediv)
{
for (var i=0; i<thedivs.length; i++)
{
document.getElementById(thedivs[i]).style.display = 'none'


}
document.getElementById(thedivs[somediv]).style.display = 'inline'

}

function startingreminder()
{
changetextvalue("exercisedescription", document.getElementById("exercisedescription").innerHTML+' [Go]')
}


// -------------------
// end shareddefault
</script>
<script src="dictionary.js"></script>

<form name="main">
<script language="JavaScript">

var numberexercisesperset=currentnumberexercises


documentwrite('<div id="maingame" style="position:relative;display:inline">')

documentwrite('<table border=1 align=center cellspacing=0 cellpadding=0 bgcolor=gray><tr><td><table border=0 width='+thetotalsize+' align=center cellspacing=0 cellpadding=0 style="background-color:gray;font-weight:bold;text-align:center"><tr><td colspan=3 align=center>')


setupboard()

documentwrite('</td></tr><tr><td colspan=3 style="height:'+Math.floor(scalef*2)+'px;background-color:silver"></td></tr><tr><td width='+Math.floor(scalef*25)+' style="background-color:gray;font-weight:bold;text-align:center;color:black">')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% align=center><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="changeexerciselevel(1)">+</td></tr></table>')
documentwrite('<table border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="exerciselevel" style="height:'+Math.floor(scalef*14)+'px; background-color:white;text-align:center;width:100%;height:'+Math.floor(scalef*15)+'px"></td></tr></table>')

documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% align=center><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="changeexerciselevel(-1)">-</td></tr></table>')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100%><tr><td align=center style="height:'+Math.floor(scalef*14)+'px; background-color:white;text-align:center;width:100%;height:'+Math.floor(scalef*15)+'px">&nbsp;&nbsp;&nbsp;L&nbsp;&nbsp;&nbsp;</td></tr></table>')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% ><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="goback()">&nbsp;&nbsp;&lt;&lt;&nbsp;&nbsp;</td></tr></table></td>')
// documentwrite('<td valign=top align=left width='+(thetotalsize-2*(Math.floor(scalef*25)))+' style="background-color:lemonchiffon;text-align:left"></td>')
documentwrite('<td valign=top align=left  style="background-color:lemonchiffon;text-align:left;overflow:hidden"><div style="position:relative;top:0px;left:0px;width:100%;color:lemonchiffon">X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X X <div id="exercisedescription" style="position:absolute;top:0px;left:0px;width:100%;color:black"></div></div></td>')
documentwrite('</td><td width='+Math.floor(scalef*25)+' style=";background-color:gray;font-weight:bold;text-align:center;color:black">')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% ><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="changetimeavailable(1)">+</td></tr></table>')
documentwrite('<table border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="basetimeavailable" style="height:'+Math.floor(scalef*14)+'px; background-color:white;text-align:center;width:100%;height:'+Math.floor(scalef*15)+'px"></td></tr></table>')

documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% ><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="changetimeavailable(-1)">-</td></tr></table>')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100%><tr><td align=center style="height:'+Math.floor(scalef*14)+'px; background-color:white;text-align:center;width:100%;height:'+Math.floor(scalef*15)+'px">&nbsp;&nbsp;&nbsp;T&nbsp;&nbsp;&nbsp;</td></tr></table>')
documentwrite('<table border=1 cellpadding=0 cellspacing=0 width=100% ><tr><td style="height:'+Math.floor(scalef*14)+'px; background-image:url(buttonbg.jpg);text-align:center;font-weight:bold" onClick="gonext()">&nbsp;&nbsp;&gt;&gt;&nbsp;&nbsp;</td></tr></table></td></tr><tr><td colspan=3 style="height:'+Math.floor(scalef*2)+'px;background-color:lemonchiffon"></td></tr>')
documentwrite('<table border=0 align=center cellspacing=0 cellpadding=0 width=100%><tr>')

documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="exerciseordernumber" style="background-color:limegreen;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="subexercisenumber" style="background-color:limegreen;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="exercisescore" style="background-color:cyan;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="exercisescoreposs" style="background-color:cyan;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td ><table border=1 cellpadding=0 cellspacing=0 width=100% height='+Math.floor(scalef*15)+'><tr><td style="background-image:url(buttonbg.jpg);text-align:center;height:'+Math.floor(scalef*14)+'px;font-weight:bold" onClick="go()">Go</td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="totalscore" style="background-color:magenta;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*22)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="totalscoreposs" style="background-color:magenta;text-align:center;width:'+Math.floor(scalef*22)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('<td width='+Math.floor(scalef*44)+'><table align=center border=1 cellspacing=0 cellpadding=0 width=100%><tr><td id="timeavailable" style="background-color:yellow;text-align:center;width:'+Math.floor(scalef*44)+'px;height:'+Math.floor(scalef*14)+'px"></td></tr></table></td>')
documentwrite('</tr></table></td></tr></table>')


</script>


</div><div style="display:none">
These are hidden as not used in this version - but may be updated by existing code so left in.
<img src="exercise0.gif" name="exerciseicon">

<input style="font-family: Arial, sans-serif; font-size: xx-small; text-align : center" type="text" readonly=readonly name="currentuser"  value="">

<input style="font-family: Arial, sans-serif; font-size: xx-small; text-align : center" type="text" readonly=readonly name="exercisetitle" value="">
<br>

<br>


</div>
</form>

<SCRIPT LANGUAGE="JavaScript">
// All code copyright of TopAccolades Limited


// General

var namescreen=[
[1,2,'blackblueC'], [1,3,'blackredO'], [1,4,'blackorangeM'], [1,5,'blackvioletP'], [1,6,'blackorangeA'], [1,7,'blackblueC'], [1,8,'blackredT'],
[3,2,'blackredB'], [3,3,'blackorangeR'], [3,4,'blackvioletA'], [3,5,'blackblueI'], [3,6,'blackorangeN'], [3,7,'blackredB'], [3,8,'blackblueO'], [3,9,'blackvioletX'] 
]

function runonload()
{
setupexercise(exerciseordernumber)


}


// Exercise 0 - Introduction
// --------------------------
function subsidiarysetupexercise0()
{
exerciseordernumber=0
exercisenumber=0
subexercisenumber=0
exercisescore=0
exercisescoreposs=0
totalscore=0
totalscoreposs=0
basetimeavailable=exercises[exercisenumber][2][exerciselevel-1]
thescores=[0,0,0,0,0,0,0,0,0,0,0]
changetextvalue("exercisedescription", exercises[exercisenumber][3])
changetextvalue("exerciselevel", '')
changetextvalue("basetimeavailable", '')
changetextvalue("timeavailable", '')
changetextvalue("exerciseordernumber", '')
changetextvalue("subexercisenumber", '')
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)

writescreen([

[1,1,'blackredB'], [1,2,'blackorangeR'], [1,3,'blackvioletA'], [1,4,'blackblueI'], [1,5,'blackorangeN'], [1,6,'blackredB'], [1,7,'blackblueO'], [1,8,'blackvioletX'], 
[3,4,'blackredF'], [3,5,'blackvioletU'], [3,6,'blackyellowN'],
[5,3,'blackredB'], [5,4,'blackredr'], [5,5,'blackreda'], [5,6,'blackredi'], [5,7,'blackredn'],
[7,2,'blackblueT'], [7,3,'blackbluer'], [7,4,'blackbluea'], [7,5,'blackbluei'], [7,6,'blackbluen'],[7,7,'blackbluei'], [7,8,'blackbluen'], [7,9,'blackblueg']

])


for (var j=0; j<width; j++)
{
changepiece(9, j, 'blackyellow*')
}

changepiece(9,5,'bbflogowhite')

if (isnewprofile==0)
{

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showhelpinfo()", 5000)

}
else
{

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("allowdefaultlevelchange()", 5000)
}
}

function allowdefaultlevelchange()
{
changetextvalue("exerciselevel", thedefaultlevel)

changetextvalue("exercisedescription", 'You may choose the default level (shown on the left) for each exercise (1=easy; 5=hard) using the + and - buttons.')

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showhelpinfo()", 8000)


}

function showhelpinfo()
{
changetextvalue("exercisedescription", 'Every section and set of exercises has its own Help (press ? at the top). You can press ? for general Help now.')
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showGoinfo()", 5000)

}


function showGoinfo()
{
changetextvalue("exercisedescription", 'Pressing Go moves you through the exercises.<br>[Go] means "Press Go to continue".<br>So... [Go] - or, wait to change the number of exercises per set or to reset profile.')
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showchangeexercisesperset()", 5000)
}

function showchangeexercisesperset()
{
changetextvalue("exercisedescription", 'You can change the number of exercises per set (current shown in yellow). Press the number you prefer. This also resets all score records in your profile to 0.<br>Press the red square to reset profile.<br>[Go]')

clearscreen()
for (var i=1; i<=defaultnumberexercisesperset; i++)
{
if (numberexercisesperset==i) 
{changepiece(5, 1+(i-1)*2, 'blackyellow'+i)}
else
{changepiece(5, 1+(i-1)*2, 'blackgray'+i)}

}
changepiece(8, 5, 'red')
}


function selectpiece0(row, col)
{
var imagename=gifname(row, col)
var somenum=imagename.slice(imagename.length-1)

if (somenum*1==somenum*1+0) // i.e. it's a number
{

numberexercisesperset=somenum*1
setexercisesperset(somenum*1)
for (var i=1; i<11; i++)
{
theprofiles[thecurrentuser][0][i][2]=0
}
theprofiles[thecurrentuser][1]=0
theprofiles[thecurrentuser][2]=0
updateprofilecookie()

clearscreen()
for (var i=1; i<=defaultnumberexercisesperset; i++)
{
if (numberexercisesperset==i) 
{changepiece(5, 1+(i-1)*2, 'blackyellow'+i)}
else
{changepiece(5, 1+(i-1)*2, 'blackgray'+i)}

}
changepiece(8, 5, 'red')
return

}
else
{
if (row==8 && col==5 && imagename=='red') // red - reset button
{
SetLocalVal('bprofiles', null)
location.reload()


}
}
}






// End 0--------------------------


// Exercise 1 - Low-High
// --------------------------

function subsidiarysetupexercise1()
{
changetextvalue("exercisedescription", 'The numbers then disappear. Press on each of the tiles that had a number on it in turn, from lowest to highest (no time limit).')

writescreen([[0,0,"lightbluetilespace"],[0,4,"lightbluetilespace"],[2,2,"lightbluetilespace"],[3,5,"lightbluetilespace"],[4,8,"lightbluetilespace"],[8,10,"lightbluetilespace"]])

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}


function setupsubexercise1()
{

subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Try to remember the numbers and their positions.')
var somenums=shufflearray([1, 2, 3, 4, 5, 6, 7, 8, 9])
var somelength=exerciselevel+3
var someselected=somenums.slice(0, somelength)
someselected=someselected.sort(numbersort)
goal=copysimplevalues(someselected)
var someextras; 
if (exerciselevel<3) {someextras=['space']} else {someextras=['space', 'space']}
var somecells=shufflearray(genevens())

// var somecells=shufflearray(cellindices())
var someextraslength=someextras.length
order=somecells.slice(0, somelength)

orderoriginal=somecells.slice(0, somelength)
var someblankcells=somecells.slice(somelength, somelength+someextraslength)
validcells=[order[0]]
clicksexpected=somelength
clicksaccepted=0
var sometotaldisplays=someselected.concat(someextras)
var sometotalcells=order.concat(someblankcells)

var somepiecename
for (var i=0; i<sometotaldisplays.length; i++)
{
var somerow=sometotalcells[i][0]
var somecol=sometotalcells[i][1]
changepiece(somerow, somecol, 'lightbluetile'+sometotaldisplays[i])
}
exercisestate='countdown'

startcountdown()

}

function genevens()
{
var somereturn=[]
for (var i=0; i<11; i++)
{
for (var j=0; j<11; j++)
{
if ((i+j)/2==Math.round((i+j)/2))
{
somereturn=somereturn.concat([[i,j]])

}

}

}
return somereturn
}

function finish1()
{
var somepiecename
for (var i=0; i<order.length; i++)
{
var somerow=order[i][0]
var somecol=order[i][1]
changepiece(somerow, somecol, 'lightbluetile'+'space'+'')
changetextvalue("exercisedescription", 'Now press on the tiles that contained the numbers, in order starting with the lowest')
exercisestate='selecting'
}
}

function selectpiece1(row, col)
{
if (exercisestate=='selecting' && gifname(row, col)!='black')
{
clearTimeout(responsetimer)
var someexpected=order[0]
var somerow=someexpected[0]
var somecol=someexpected[1]
var somepiecename
order=tailarray(order)
var somestatus='progressing'
if (somerow==row && somecol==col)
{
if (order.length==0)
{
somestatus='success'
}
}
else
{
somestatus='failure'
}

if (somestatus !=  'progressing')
{
for (var i=0; i<orderoriginal.length; i++)
{
somerow=orderoriginal[i][0]
somecol=orderoriginal[i][1]
changepiece(somerow, somecol, 'lightbluetile'+goal[i]+'')
}
exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
somemessage='Incorrect! [Go]'

}
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)

changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)



}
else
{
changepiece(row, col, 'whitecorrect')
if (responsetimer != null) {clearTimeout(responsetimer)}
responsetimer= setTimeout('changepiece('+row+', '+col+', "lightbluetilespace")', 200)

}
}
else
{
showerror(row, col)
}
}




// End 1--------------------------




// Exercise 2 Rotations
// --------------------------

function subsidiarysetupexercise2()
{
changetextvalue("exercisedescription", 'Green ticks show the correct ones. Try mentally rotating the first above 90 degs clockwise; it is identical to the second. No others are identical but rotated.')

writescreen([[0,0,"violet"],[0,1,"blue"],[0,2,"orange"],[0,4,"white"],[0,5,"violet"],[0,6,"violet"],[0,8,"red"],[0,9,"white"],[0,10,"orange"],[1,0,"violet"],[1,1,"correctblackhub"],[1,2,"white"],[1,4,"red"],[1,5,"correctblackhub"],[1,6,"blue"],[1,8,"red"],[1,9,"blackhub"],[1,10,"violet"],[2,0,"white"],[2,1,"red"],[2,2,"red"],[2,4,"red"],[2,5,"white"],[2,6,"orange"],[2,8,"white"],[2,9,"blue"],[2,10,"violet"],[4,0,"red"],[4,1,"white"],[4,2,"orange"],[4,4,"violet"],[4,5,"violet"],[4,6,"orange"],[5,0,"red"],[5,1,"blackhub"],[5,2,"blue"],[5,4,"blue"],[5,5,"blackhub"],[5,6,"white"],[6,0,"white"],[6,1,"violet"],[6,2,"violet"],[6,4,"white"],[6,5,"red"],[6,6,"red"], [10,5,"ok"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)


}

function flip(somebaseshape)
{
//  middle 
//          
//   3             1
//          2

// corner
//   0             1
//
//   3             2
var somemiddlecolours=somebaseshape[0]
var somemiddlepositions=somebaseshape[1]
var somecornercolours=somebaseshape[2]
var somecornerpositions=somebaseshape[3]
var somenewmiddlepositions=copysimplevalues(somemiddlepositions)
var somenewcornerpositions=copysimplevalues(somecornerpositions)
var sometranslation=[0, 3, 2, 1]
for (var i=0; i<somemiddlepositions.length; i++)
{
somenewmiddlepositions[i]=sometranslation[somemiddlepositions[i]]
}
sometranslation=[1, 0, 3, 2]
for (var i=0; i<somecornerpositions.length; i++)
{

somenewcornerpositions[i]=sometranslation[somecornerpositions[i]]
}
return [somemiddlecolours, somenewmiddlepositions, somecornercolours, somenewcornerpositions]

}

function rotateshape(somebaseshape, sometype)
{
//  middle 
//          0
//   3             1
//          2

// corner
//   0             1
//
//   3             2
var somemiddlecolours=somebaseshape[0]
var somemiddlepositions=somebaseshape[1]
var somecornercolours=somebaseshape[2]
var somecornerpositions=somebaseshape[3]
var somenewmiddlepositions=copysimplevalues(somemiddlepositions)
var somenewcornerpositions=copysimplevalues(somecornerpositions)

for (var i=1; i<=sometype; i++)
{
for (var j=0; j<somenewmiddlepositions.length; j++)
{
if (somenewmiddlepositions[j]==3) {somenewmiddlepositions[j]=0} else {somenewmiddlepositions[j]=somenewmiddlepositions[j]+1}
}
for (var j=0; j<somenewcornerpositions.length; j++)
{
if (somenewcornerpositions[j]==3) {somenewcornerpositions[j]=0} else {somenewcornerpositions[j]=somenewcornerpositions[j]+1}
}
}
return [somemiddlecolours, somenewmiddlepositions, somecornercolours, somenewcornerpositions]
}

function writeoutshape(somebaseshape, somepos)
{
var somemiddlecolours=somebaseshape[0]
var somemiddlepositions=somebaseshape[1]
var somecornercolours=somebaseshape[2]
var somecornerpositions=somebaseshape[3]

var somecolour
var somerow=somepos[0]
var somecol=somepos[1]
for (var i=0; i<3; i++)
{
for (var j=0; j<3; j++)
{
changepiece(somerow+i, somecol+j, 'white')
}
changepiece(somerow+1, somecol+1, 'blackhub')
}
var somepiecepos
var somerowdelta
var somecoldelta
for (var i=0; i<somemiddlecolours.length; i++)
{
somerowdeltas=[0, 1, 2, 1]
somecoldeltas=[1, 2, 1, 0]
somecolour=somemiddlecolours[i]

somepiecepos=somemiddlepositions[i]
somerowdelta=somerowdeltas[somepiecepos]
somecoldelta=somecoldeltas[somepiecepos]
changepiece(somerow+somerowdelta, somecol+somecoldelta, somecolour+'')
}

for (var i=0; i<somecornercolours.length; i++)
{
somerowdeltas=[0, 0, 2, 2]
somecoldeltas=[0, 2, 2, 0]
somecolour=somecornercolours[i]
somepiecepos=somecornerpositions[i]
somerowdelta=somerowdeltas[somepiecepos]
somecoldelta=somecoldeltas[somepiecepos]
changepiece(somerow+somerowdelta, somecol+somecoldelta, somecolour+'')
}

}

// shapemiddle also used in exercise 5
function shapemiddle(somepos)
{
var somestarts=[[0, 0], [0, 4], [0, 8], [4, 0], [4, 4], [4, 8], [8, 0], [8, 4], [8, 8]]
return [somestarts[somepos][0]+1, somestarts[somepos][1]+1]
}

function setupsubexercise2()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
var somemax=[1,2,3,3,3][exerciselevel-1]
var somemessage='There are from 2 to 4 identical but rotated shapes.'
if (exerciselevel==1) {somemessage='There are only 2 identical but rotated shapes.'}
if (exerciselevel==2) {somemessage='There are 2 or 3 identical but rotated shapes.'}
changetextvalue("exercisedescription", somemessage+' Press on all of these before the countdown ends.  OK stops the countdown early.')

var sometotalshapes=exerciselevel+3
var somenummiddles=3
var somenumcorners=3
var somecolours=['red', 'orange', 'blue', 'violet']
var somemiddlecolours=shufflearray(somecolours).slice(0, somenummiddles)
var somecornercolours=shufflearray(somecolours).slice(0, somenumcorners)
var somepositions=[0, 1, 2, 3]

var somemiddlepositions=shufflearray(somepositions).slice(0, somenummiddles)
var somecornerpositions=shufflearray(somepositions).slice(0, somenumcorners)
var somenewshapes=[]

for (var i=0; i<5; i++)
{
somenewshapes[i]=[copysimplevalues(somemiddlecolours), copysimplevalues(somemiddlepositions), copysimplevalues(somecornercolours), copysimplevalues(somecornerpositions)]
}
var sometemp
sometemp=somenewshapes[1][1][0]; somenewshapes[1][1][0]=somenewshapes[1][1][1]; somenewshapes[1][1][1]=sometemp
sometemp=somenewshapes[2][3][0]; somenewshapes[2][3][0]=somenewshapes[2][3][1]; somenewshapes[2][3][1]=sometemp
sometemp=somenewshapes[3][1][1]; somenewshapes[3][1][1]=somenewshapes[3][1][2]; somenewshapes[3][1][2]=sometemp
sometemp=somenewshapes[4][3][1]; somenewshapes[4][3][1]=somenewshapes[4][3][2]; somenewshapes[4][3][2]=sometemp
var somepossrotations=[0, 1, 2, 3]
var somerotations=[]


var somematches=randomnumber(somemax)+1 // this number will be matching - 2-4
var someremaining=sometotalshapes-somematches
var somebaseflips=0
if (Math.round(someremaining/2)!=someremaining/2) {somebaseflips=1} 

var somebasedisplayshapes=[]
sometemp=shufflearray(somepossrotations)
for (var i=0; i<somematches; i++)
{
somebasedisplayshapes[i]=rotateshape(somenewshapes[0], somepossrotations[i])
}
if (somebaseflips==1) {somebasedisplayshapes=somebasedisplayshapes.concat([rotateshape(flip(somenewshapes[0]), randomnumber(4)-1)])}
// somebasedisplayshapes contains a certain number of rotated matching shapes + one flipped one

var someaddmutatedshapes=(someremaining-somebaseflips)/2
for (var i=0; i<someaddmutatedshapes; i++)
{
sometemp=shufflearray(somepossrotations).slice(0, 2)
somerotations[2*i]=sometemp[0]
somerotations[2*i+1]=sometemp[1]
}
var someextradisplayshapes=[]
for (var i=0; i<someaddmutatedshapes; i++)
{
someextradisplayshapes[i*2]=rotateshape(somenewshapes[i+1], somerotations[i*2])
someextradisplayshapes[i*2+1]=rotateshape(flip(somenewshapes[i+1]), somerotations[i*2+1])

}
var somedisplayshapes=somebasedisplayshapes.concat(someextradisplayshapes)

var somepositions=shufflearray([0, 1, 2, 3, 4, 5, 6, 7, 8].slice(0, sometotalshapes))
var somestarts=[[0, 0], [0, 4], [0, 8], [4, 0], [4, 4], [4, 8], [8, 0], [8, 4], [8, 8]]
goal=(somepositions.slice(0, somematches)).sort(numbersort)

answergiven=[]
for (var i=0; i<sometotalshapes; i++)
{
writeoutshape(somedisplayshapes[i], somestarts[somepositions[i]])
}
changepiece(10,5, 'ok')
exercisestate='selecting'

startcountdown()


}

function finish2()
{
var somestatus
var somesortanswergiven=answergiven.sort(numbersort)
if (answergiven.length==goal.length)
{
somestatus='success'
for (var i=0; i<goal.length; i++)
{
if (somesortanswergiven[i]!=goal[i]) {somestatus='failure'}

}
}

else {somestatus='failure'}

exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
somemessage='Incorrect! [Go]'

}
var shape
for (var i=0; i<answergiven.length; i++)
{
shape=shapemiddle(answergiven[i])
changepiece(shape[0], shape[1], 'wrongblackhub')

}
for (var i=0; i<goal.length; i++)
{
shape=shapemiddle(goal[i])
changepiece(shape[0], shape[1], 'correctblackhub')

}
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)

}

function selectpiece2(row, col)
{

var piecename='piece'+row+'_'+col
var imagename=gifname(row, col)
if (exercisestate=='selecting' && imagename !='black')
{
if (imagename=='ok')
{
stopcountdownearly()

}
else
{
var somepos
if (row<3 && col<3) {somepos=0}
if (row<3 && col>3 && col<7) {somepos=1}
if (row<3 && col>7) {somepos=2}
if (row>3 && row<7 && col<3) {somepos=3}
if (row>3 && row<7 && col>3 && col<7) {somepos=4}
if (row>3 && row<7 && col>7) {somepos=5}
if (row>7 && col<3) {somepos=6}
if (row>7 && col>3 && col<7) {somepos=7}
if (row>7 && col>7) {somepos=8}

answergiven=answergiven.concat([somepos])
var somemiddle=shapemiddle(somepos)
changepiece(somemiddle[0], somemiddle[1], 'greyhub')
}
}
else
{
showerror(row, col)
}
}

// End 2--------------------------



// Exercise 3 - Jumble
// --------------------------

function subsidiarysetupexercise3()
{

changetextvalue("exercisedescription", 'As you do so, the letters will be moved down to show the word forming (the last letter moves down automatically).  The correct answer is shown underneath.')

writescreen([[4,0,"blackcorrect"],[4,1,"blueB"],[4,2,"blueO"],[4,3,"blueU"],[4,4,"blueG"],[4,5,"blueH"],[4,6,"blueT"],[7,1,"blueB"],[7,2,"blueO"],[7,3,"blueU"],[7,4,"blueG"],[7,5,"blueH"],[7,6,"blueT"]])
if (responsetimer != null) {clearTimeout(responsetimer)}
responsetimer= setTimeout("startingreminder()", 10000)


}





function setupsubexercise3()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
var somelistindex=exerciselevel-1


changetextvalue("exercisedescription", 'Identify the mixed-up word and press on the letters of the word in their usual left-to-right order')
var someword=thewordlist[somelistindex][subexercisenumber-1]
var somechars=charlist(someword)
var somemix=differentjumble(somechars)

originalorder=somemix
goal=somechars
answergiven=[]
var somepiecename
var someline=0
for (var i=0; i<somemix.length; i++)
{
somepiecename='piece'+(1+someline)+'_'+(1+i)
changepiece(1+someline, 1+i, 'blue'+somemix[i])
someline=1-someline
// document.images[somepiecename].src='blue'+somemix[i]+''
}
exercisestate='selecting'

startcountdown()
}

function finish3()
{
var somepiecename

for (var i=0; i<goal.length; i++)
{
somepiecename='piece'+7+'_'+(1+i)
changepiece(7, 1+i, 'blue'+goal[i])
// document.images[somepiecename].src='blue'+goal[i]+''
}
var somestatus='success'
if (answergiven.length!=goal.length)
{
somestatus='failure'
}
else
{
for (var i=0; i<goal.length; i++)
{
if (goal[i]!=answergiven[i]) {somestatus='failure'}
}
} 

exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
changepiece(4, 0, 'blackcorrect')
// document.images['piece'+4+'_0'].src='blackcorrect'

}
if (somestatus=='failure')
{
if (countdownend=='early')
{
somemessage='Incorrect! [Go]'
changepiece(4, 0, 'blackwrong')

// document.images['piece'+4+'_0'].src='blackwrong'

}
else
{
somemessage='Time ran out! [Go]'

}
}


exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)

changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)
}

function remainingone(somegoal, someanswer)
{
somegoal=somegoal.sort()
someanswer=someanswer.sort().concat([-1])
for (var i=0; i<somegoal.length; i++)
{
if (somegoal[i]!=someanswer[i]) {return somegoal[i]}
}
}

function selectpiece3(row, col)
{

if (exercisestate=='selecting' && gifname(row, col)!='black' && (row==1 || row==2))
{

var someindex=col-1
var someletter=originalorder[someindex]
changepiece(row, col, 'black')
answergiven=answergiven.concat([someletter])
somelength=answergiven.length
changepiece(4, somelength, 'blue'+someletter+'')
if (answergiven.length==goal.length-1) 
{
var somelast=remainingone(copysimplevalues(goal), copysimplevalues(answergiven))

answergiven=answergiven.concat([somelast])
changepiece(4, somelength+1, 'blue'+somelast+'')
for (var i=0; i<width; i++)
{
changepiece(1, i, 'black')
changepiece(2, i, 'black')
}
stopcountdownearly()
}
}
else
{
showerror(row, col)
}
}

// End 3 --------------------------


// Exercise 4 Arithmetic
// --------------------------

function subsidiarysetupexercise4()
{
changetextvalue("exercisedescription", '+/- changes the sign of the result; C clears it. OK ends the countdown early. The correct answer is then displayed and your answer marked.')

writescreen([[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,3,"white"],[0,4,"white"],[0,5,"white"],[0,6,"white"],[0,7,"white"],[0,8,"white"],[0,9,"white"],[0,10,"white"],[1,0,"white"],[1,1,"white"],[1,2,"white"],[1,3,"white"],[1,4,"white"],[1,5,"red4"],[1,6,"red5"],[1,7,"white"],[1,8,"white"],[1,9,"white"],[1,10,"white"],[2,0,"white"],[2,1,"white"],[2,2,"white"],[2,3,"white"],[2,4,"white"],[2,5,"red3"],[2,6,"red0"],[2,7,"blacksubtract"],[2,8,"white"],[2,9,"white"],[2,10,"white"],[3,0,"whitecorrect"],[3,1,"blackequals"],[3,2,"red1"],[3,3,"red5"],[3,4,"white"],[3,5,"white"],[3,6,"white"],[3,7,"white"],[3,8,"white"],[3,9,"white"],[3,10,"white"],[4,0,"whitecorrect"],[4,1,"blackequals"],[4,2,"red1"],[4,3,"red5"],[4,4,"white"],[4,5,"white"],[4,6,"white"],[4,7,"white"],[4,8,"white"],[4,9,"white"],[4,10,"white"],
// [6,4,"button1"],[6,5,"button2"],[6,6,"button3"],[7,4,"button4"],[7,5,"button5"],[7,6,"button6"],[8,4,"button7"],[8,5,"button8"],[8,6,"button9"],[9,4,"buttonplusminus"],[9,5,"button0"],[9,6,"buttonC"],[9,7,"ok"]
// [6, 3], [6, 5], [6, 7],[7, 2], [7, 4], [7, 6], [7, 8], [8, 3], [8, 5], [8, 7], [9, 4], [9, 6], [9, 8]
[6,3,"button1"],[6,5,"button2"],[6,7,"button3"],[7,2,"button4"],[7,4,"button5"],[7,6,"button6"],[7,8,"button7"],[8,3,"button8"],[8,5,"button9"],[8,7,"button0"],[9,4,"buttonplusminus"],[9,6,"buttonC"],[10,5,"ok"]
])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}

function setupsubexercise4()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Enter the answer with the keypad at the bottom of the screen.')
if (exerciselevel>=3) {changetextvalue("exercisedescription", gettextvalue("exercisedescription")+'<br>Negative answers possible!')}
if (exerciselevel>=4) {changetextvalue("exercisedescription", gettextvalue("exercisedescription")+'<br>Negative inputs possible!')}
for (var i=0; i<5; i++)
{
for (var j=0; j<width; j++)
{
changepiece(i, j, 'white')
}
}

var sometype=randomnumber(4) // 1=addition 2=subtraction, 3=multiplication, 4=division
var somemaxsum1
var somemaxsum2
var somemaxmult1
var somemaxmult2
var someminsum1
var someminsum2
var someminmult1
var someminmult2
var allowneginputs=false
var allownegoutputs=false
if (exerciselevel==1) {somemaxsum1=50; somemaxsum2=50; somemaxmult1=10; somemaxmult2=10; someminsum1=11; someminsum2=11; someminmult1=3; someminmult2=4}
if (exerciselevel==2) {somemaxsum1=100; somemaxsum2=100; somemaxmult1=20; somemaxmult2=10; someminsum1=51; someminsum2=51; someminmult1=11; someminmult2=3}
if (exerciselevel==3) {somemaxsum1=1000; somemaxsum2=1000; somemaxmult1=25; somemaxmult2=25; someminsum1=101; someminsum2=101; someminmult1=15; someminmult2=15; allownegoutputs=true}
if (exerciselevel==4) {somemaxsum1=10000; somemaxsum2=1000; somemaxmult1=50; somemaxmult2=50; someminsum1=1001; someminsum2=101; someminmult1=15; someminmult2=15; allownegoutputs=true; allowneginputs=true}
if (exerciselevel==5) {somemaxsum1=99999; somemaxsum2=99999; somemaxmult1=150; somemaxmult2=99; someminsum1=999; someminsum2=99; someminmult1=101; someminmult2=21; allownegoutputs=true; allowneginputs=true}
if (sometype<=2) // addition or subtraction
{
var somenum1=randominrange(someminsum1, somemaxsum1)
var somenum2=randominrange(someminsum2, somemaxsum2)
var somefirst=somenum1
var somesecond=somenum2
if (somenum1<somenum2 && allownegoutputs==false && sometype==2) {somefirst=somenum2; somesecond=somenum1}
if (allowneginputs==true) {somefirst=([1, 1, -1][randomnumber(3)-1])*somefirst; somesecond=([1, 1, -1][randomnumber(3)-1])*somesecond}
}
else // multiplication or division
{
var somenum1=randominrange(someminmult1, somemaxmult1)
var somenum2=randominrange(someminmult2, somemaxmult2)

var somefirst=somenum1
var somesecond=somenum2
if (allowneginputs==true) {somefirst=([1, 1, -1][randomnumber(3)-1])*somefirst; somesecond=([1, 1, -1][randomnumber(3)-1])*somesecond}
if (sometype==4) {somefirst=somefirst*somesecond}
}
var somesymbol=['add', 'subtract', 'multiply', 'divide'][sometype-1]
var somesign=['+', '-', '*', '/'][sometype-1]
goal=charlist(''+eval('('+somefirst+')'+somesign+'('+somesecond+')'))
somefirst=''+somefirst; somesecond=''+somesecond;
var somenums=[charlist(somefirst), charlist(somesecond)]
var somelength
var somestart
for (var i=0; i<somenums.length; i++)
{
somelength=somenums[i].length
for (var j=0; j<somenums[i].length; j++)
{
somestart=7-somenums[i].length
changepiece((i+1), (somestart+j), 'red'+somenums[i][j])
}
}
changepiece(2, 7, 'black'+somesymbol+'')
changepiece(4, 1, 'blackequals')
/*
var somekeys=['button1', 'button2', 'button3', 'button4', 'button5', 'button6', 'button7', 'button8', 'button9', 'buttonplusminus', 'button0', 'ok',  'buttonC']
var somepositions=[[6, 4], [6, 5], [6, 6],[7, 4], [7, 5], [7, 6], [8, 4], [8, 5], [8, 6], [9, 4], [9, 5], [9, 7], [9, 6]]
*/
var somekeys=['button1', 'button2', 'button3', 'button4', 'button5', 'button6', 'button7', 'button8', 'button9', 'button0', 'buttonplusminus',  'buttonC', 'ok']
var somepositions=[[6, 3], [6, 5], [6, 7],[7, 2], [7, 4], [7, 6], [7, 8], [8, 3], [8, 5], [8, 7], [9, 4], [9, 6], [10, 5]]
for (var i=0; i<somekeys.length; i++)
{
changepiece(somepositions[i][0], somepositions[i][1], somekeys[i]+'')
}
answergiven=[]
exercisestate='selecting'

startcountdown()

}

function finish4()
{
var somelength=goal.length
var somepiecename
changepiece(3, 1, 'blackequals')

for (var i=0; i<goal.length; i++)
{
changepiece(3, (2+i), 'red'+goal[i])
}
var somestatus='success'
var someanswervalue=makestring(answergiven)*1
var somegoalvalue=makestring(goal)*1
if (someanswervalue!=somegoalvalue || answergiven.length==0)
{
somestatus='failure'
}
else
{
somestatus='success'
} 
var somefeedback
if (somestatus=='success') {somefeedback='whitecorrect'} else {somefeedback='whitewrong'}
changepiece(4, 0, somefeedback)
changepiece(3, 0, 'whitecorrect')
exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
if (countdownend=='early')
{
somemessage='Incorrect! [Go]'
}
else
{
somemessage='Time ran out! [Go]'

}
}
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)

}

function selectpiece4(row, col)
{
var piecename='piece'+row+'_'+col
var imagename=gifname(row, col)
if (exercisestate=='selecting' && row>5 && imagename !='black')
{
if (imagename=='ok')
{
stopcountdownearly()
}
else
{
if (imagename=='buttonC') {answergiven=[]}
else
{
if (imagename=='buttonplusminus') 
{
if (answergiven.length>0)
 {
  if (answergiven[0]=='-') {answergiven=answergiven.slice(1)} else {answergiven=['-'].concat(answergiven)}
 }
 else
 {
 answergiven=['-']
 }
}
else
{

var somechar=charlist(imagename).slice(6)[0]

if (answergiven.length<9) {answergiven=answergiven.concat([somechar])}
}
}
for (var i=2; i<width; i++)
{
changepiece(4, i, 'white')
}
for (var i=0; i<answergiven.length; i++)
{
changepiece(4, (i+2), 'red'+answergiven[i]+'')
}
}
}
else
{
showerror(row, col)
}
}

// End 4 --------------------------


// Exercise 5 Sequences
// --------------------------



function subsidiarysetupexercise5()
{
changetextvalue("exercisedescription", 'For sequences, numbers (0-9), letters (A-Z) and colours (red, orange, blue, violet) cycle endlessly (see Help (?) for more details).')

writescreen([[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,4,"violet3"],[0,5,"bluesquare"],[0,6,"white"],[0,8,"white"],[0,9,"white"],[0,10,"red1"],[1,0,"white"],[1,1,"blackhubnumber1"],[1,2,"white"],[1,4,"white"],[1,5,"blackhubnumber2"],[1,6,"white"],[1,8,"white"],[1,9,"blackhubnumber3"],[1,10,"white"],[2,0,"blue5"],[2,1,"orangesquare"],[2,2,"white"],[2,4,"white"],[2,5,"white"],[2,6,"white"],[2,8,"white"],[2,9,"violetsquare"],[2,10,"white"],[3,0,"greyline"],[3,1,"greyline"],[3,2,"greyline"],[3,3,"greyline"],[3,4,"greyline"],[3,5,"greyline"],[3,6,"greyline"],[3,7,"greyline"],[3,8,"greyline"],[3,9,"greyline"],[3,10,"greyline"],[4,0,"white"],[4,1,"white"],[4,2,"white"],[4,4,"white"],[4,5,"redsquare"],[4,6,"white"],[4,8,"white"],[4,9,"redsquare"],[4,10,"white"],[5,0,"redsquare"],[5,1,"blackhubnumber4"],[5,2,"white"],[5,4,"white"],[5,5,"blackhubnumber4"],[5,6,"white"],[5,8,"white"],[5,9,"correctblackhubnumber4"],[5,10,"white"],[6,0,"white"],[6,1,"white"],[6,2,"orange9"],[6,4,"white"],[6,5,"white"],[6,6,"blue0"],[6,8,"white"],[6,9,"white"],[6,10,"orange9"],[8,0,"white"],[8,1,"violetsquare"],[8,2,"white"],[9,0,"white"],[9,1,"blackhubnumber4"],[9,2,"white"],[10,0,"white"],[10,1,"white"],[10,2,"blue9"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}

function cycleindex(sometype, someindex)
{
var somelimit=4
if (sometype=='number') {somelimit=10}
if (sometype=='letter') {somelimit=26}
if (someindex>=0 && someindex<somelimit) {return someindex}
if (someindex<0) {return cycleindex(sometype, someindex+somelimit)}
if (someindex>=somelimit) {return cycleindex(sometype, someindex-somelimit)}
}

function imagefile(someelement)
{

if (someelement[0]=='number')
{
return thecolours[someelement[1]]+thenumerals[someelement[2]]
}
if (someelement[0]=='letter')
{
return thecolours[someelement[1]]+theletters[someelement[2]]
}
if (someelement[0]=='square')
{
return thecolours[someelement[1]]+'square'
}


if (someelement[0]=='circle')
{
return thecolours[someelement[1]]+'dot'
}


}

function writeoutpatternsequence(somen, somepatterns, somepositions, somepos)
{
var somemiddlepatterns=somepatterns[0]
var somemiddlepositions=somepositions[0]
var somecornerpatterns=somepatterns[1]
var somecornerpositions=somepositions[1]

var someelement
var somerow=somepos[0]
var somecol=somepos[1]
for (var i=0; i<3; i++)
{
for (var j=0; j<3; j++)
{
changepiece(somerow+i, somecol+j, 'white')
}
changepiece(somerow+1, somecol+1, 'blackhubnumber'+(somen+1))
}
var somepiecepos
var somerowdelta
var somecoldelta
for (var i=0; i<somemiddlepatterns.length; i++)
{
somerowdeltas=[0, 1, 2, 1]
somecoldeltas=[1, 2, 1, 0]
someelement=somemiddlepatterns[i]

somepiecepos=somemiddlepositions[i]
somerowdelta=somerowdeltas[somepiecepos]
somecoldelta=somecoldeltas[somepiecepos]
changepiece(somerow+somerowdelta, somecol+somecoldelta, imagefile(someelement))
}

for (var i=0; i<somecornerpatterns.length; i++)
{
somerowdeltas=[0, 0, 2, 2]
somecoldeltas=[0, 2, 2, 0]
someelement=somecornerpatterns[i]
somepiecepos=somecornerpositions[i]
somerowdelta=somerowdeltas[somepiecepos]
somecoldelta=somecoldeltas[somepiecepos]
changepiece(somerow+somerowdelta, somecol+somecoldelta, imagefile(someelement))
}

}


function setupsubexercise5()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
var somemessage=''
if (exerciselevel==1) {somemessage='Press on the missing member of the sequence (central numbers 1-4) from below the line.  The 4th is missing; the others are shown in left-right order.'}
if (exerciselevel==2) {somemessage='Press on the missing member of the sequence (central numbers 1-4) from below the line.  The 1st or 4th may be missing; the others are shown in left-right order.'}
if (exerciselevel==3) {somemessage='Press on the missing member of the sequence (central numbers 1-4) from below the line.  Any one may be missing; the others are shown in left-right order.'}
if (exerciselevel>3) {somemessage='Press on the missing member of the sequence (central numbers 1-4) from below the line.  Any one may be missing; the others may not be in left-right order.'}
changetextvalue("exercisedescription", somemessage)

for (var i=0; i<width; i++)
{
changepiece(3, i, 'greyline')
}
var somebasepatterns=['square', 'circle', 'number', 'letter']
var sometotalnum=exerciselevel
var somenummiddles=Math.floor(sometotalnum/2)
var somenumcorners=sometotalnum-somenummiddles
var somemiddlepatterns=shufflearray(somebasepatterns).slice(0, somenummiddles)
var somecornerpatterns=shufflearray(somebasepatterns).slice(0, somenumcorners)
var somenummiddles=somemiddlepatterns.length
var somenumcorners=somecornerpatterns.length
var somepositions=[0, 1, 2, 3]

var somemiddlepositions=shufflearray(somepositions).slice(0, somenummiddles)
var somecornerpositions=shufflearray(somepositions).slice(0, somenumcorners)
var somecolours=thecolours
var someletters=theletters
var somenumerals=thenumerals

var somemaxcolourdelta=2
var somemaxnumberdelta=1+exerciselevel
var somemaxletterdelta=exerciselevel
var sometype
var somestart
var somestartcol
var somedelta
var somedeltacol
var somesign
var somesigncol
var somestarts=[[], []]
var somepatterns=[somemiddlepatterns, somecornerpatterns]

for (var k=0; k<2; k++)
{
for (var i=0; i<somepatterns[k].length; i++)
{
sometype=somepatterns[k][i]

somestartcol=randomnumber(somecolours.length)-1
somedeltacol=randomnumber(somemaxcolourdelta)
somesigncol=shufflearray([-1, 1])[0]
if (sometype=='square' || sometype=='circle')
{
somepatterns[k][i]=[sometype, [somestartcol, somedeltacol, somesigncol]]
}
if (sometype=='number')
{
somestart=randomnumber(somenumerals.length)-1
somedelta=randomnumber(somemaxnumberdelta)
somesign=shufflearray([-1, 1])[0]
somepatterns[k][i]=[sometype, [somestartcol, somedeltacol, somesigncol], [somestart, somedelta, somesign] ]
}
if (sometype=='letter')
{
somestart=randomnumber(someletters.length)-1
somedelta=randomnumber(somemaxletterdelta)
somesign=shufflearray([-1, 1])[0]
somepatterns[k][i]=[sometype, [somestartcol, somedeltacol, somesigncol], [somestart, somedelta, somesign] ]
}
}
}
var somefour=[]
var someelement
var somenewelement
var someitem
var someitemcol
var someindex
var someindexcol
for (var i=0; i<4; i++)
{
somefour[i]=[[], []]
for (var j=0; j<2; j++)
{
for (var k=0; k<somepatterns[j].length; k++)
{
someelement=somepatterns[j][k]
someindexcol=someelement[1][0]+i*(someelement[1][1]*someelement[1][2])
someindexcol=cycleindex('colour', someindexcol)
somenewelement=[someelement[0], someindexcol]

if (someelement[0]=='number' || someelement[0]=='letter')
{
someindex=someelement[2][0]+i*(someelement[2][1]*someelement[2][2])
someindex=cycleindex(someelement[0], someindex)

somenewelement[2]=someindex
}
somefour[i][j][k]=somenewelement
} // end k
} // end j
} // end i
var somepositions=[somemiddlepositions, somecornerpositions]
var deltapositions=[-2, -1, 1, 2]
if (exerciselevel==1) {deltapositions=[-1, 1]}
var somerotations=[shufflearray(deltapositions)[0], shufflearray(deltapositions)[0]]
var somefourpositions=[]
for (var i=0; i<4; i++)
{
somefourpositions[i]=[[], []]
for (var j=0; j<2; j++)
{
for (var k=0; k<somepositions[j].length; k++)
{
someelement=somepositions[j][k]
someindex=someelement+i*(somerotations[j])
someindex=cycleindex('rotation', someindex)
somefourpositions[i][j][k]=someindex
}
}
}
var somestarts=[[0, 0], [0, 4], [0, 8], [4, 0], [4, 4], [4, 8], [8, 0], [8, 4], [8, 8]]
var someseq=[0,1,2,3]
var somemissing
var sometopthree
if (exerciselevel==1) {somemissing=3; sometopthree=[0,1,2]}
if (exerciselevel==2) 
{
somemissing=shufflearray([0,3])[0]; sometopthree=removeElement(somemissing, someseq)
}
if (exerciselevel==3) 
{
somemissing=shufflearray(someseq)[0]; sometopthree=removeElement(somemissing, someseq)
}
if (exerciselevel>3) 
{
somemissing=shufflearray(someseq)[0]; sometopthree=shufflearray(removeElement(somemissing, someseq))
}
var someindex
for (var i=0; i<3; i++)
{
someindex=sometopthree[i]
writeoutpatternsequence(someindex, somefour[someindex], somefourpositions[someindex], somestarts[i])
}

var somebase4patterns=somefour[somemissing]
var somebase4positions=somefourpositions[somemissing]

var somenumvariations=3
if (exerciselevel==4) {somenumvariations=4}
if (exerciselevel==5) {somenumvariations=5}


var someposstweaks=[[0, 'number', 1], [0, 'number', 2], [0, 'letter', 1], [0, 'letter', 2], [0, 'square', 1], [0, 'circle', 1], [1, 'number', 1], [1, 'number', 2], [1, 'letter', 1], [1, 'letter', 2], [1, 'square', 1], [1, 'circle', 1], [0], [1]]

var someappliedtweaks

var somemutatedpatterns=[[copyvalues(somebase4patterns[0]), copyvalues(somebase4patterns[1])]]
var somemutatedpositions=[copyvalues(somebase4positions)]
var sometweakindex=0
var someoldvalue
var somenewvalue
var somemiddlecornerindex
var somecolouritemindex
var sometweaked
var somecurrentpositions
var somenewpositions
var sometypecheck
for (var i=1; i<=somenumvariations; i++)
{
someappliedtweaks=shufflearray(someposstweaks)

somemutatedpatterns[i]=[copyvalues(somebase4patterns[0]), copyvalues(somebase4patterns[1])]
somemutatedpositions[i]=copyvalues(somebase4positions)
sometweaked=false
for (var j=0; j<someappliedtweaks.length; j++)
{
somemiddlecornerindex=someappliedtweaks[j][0]
if (sometweaked==false || randomnumber(3)==1)
{
if (someappliedtweaks[j].length>1) // change an item
{
sometype=someappliedtweaks[j][1]
somecolouritemindex=someappliedtweaks[j][2]
for (var k=0; k<somemutatedpatterns[i][somemiddlecornerindex].length; k++)
{

if (somemutatedpatterns[i][somemiddlecornerindex][k][0]==sometype)
  {
  someoldvalue=somemutatedpatterns[i][somemiddlecornerindex][k][somecolouritemindex]
  somedelta=shufflearray([-1, 1])[0]
  if (somecolouritemindex==1) {sometypecheck='colour'} else {sometypecheck=sometype}
  somenewvalue=cycleindex(sometypecheck, someoldvalue+somedelta)
  somemutatedpatterns[i][somemiddlecornerindex][k][somecolouritemindex]=somenewvalue
  sometweaked=true
  }
}

}
else // change a position
{
somecurrentpositions=somemutatedpositions[i][somemiddlecornerindex]
somenewpositions=[]
somedelta=shufflearray([-1, 1])[0]
for (var k=0; k<somecurrentpositions.length; k++)
{
somenewpositions[k]=cycleindex('rotation', somecurrentpositions[k]+somedelta)
  sometweaked=true
}
somemutatedpositions[i][somemiddlecornerindex]=somenewpositions


}
}
}
}
// alert([somemutatedpatterns[0], ' @ ', somemutatedpositions[0]])
var somelayout=[3, 4, 5, 6, 7, 8]
var somenewlayout=shufflearray(somelayout.slice(0, somemutatedpositions.length))
// var somenewlayout=somelayout.slice(0, somemutatedpositions.length)
// alert(somenewlayout)
goal=somenewlayout[0]
order=somemissing
answergiven=-1
// alert(goal)
for (var i=0; i<somemutatedpatterns.length; i++)
{
writeoutpatternsequence(somemissing, somemutatedpatterns[i], somemutatedpositions[i], somestarts[somenewlayout[i]])
}


exercisestate='selecting'

startcountdown()



}



function finish5()
{
var somestatus
if (answergiven==goal)
{
somestatus='success'
}

else {somestatus='failure'}
exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
if (countdownend=='early')
{
somemessage='Incorrect! [Go]'
var shape2=shapemiddle(answergiven)

changepiece(shape2[0], shape2[1], 'wrongblackhubnumber'+(order+1)+'')

}
else
{
somemessage='Time ran out! [Go]'

}
}
var shape1=shapemiddle(goal)
changepiece(shape1[0], shape1[1], 'correctblackhubnumber'+(order+1)+'')

exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)

}

function selectpiece5(row, col)
{

var piecename='piece'+row+'_'+col
var imagename=gifname(row, col)
if (exercisestate=='selecting' && imagename !='black' && row>3)
{
var somepos
if (row>3 && row<7 && col<3) {somepos=3}
if (row>3 && row<7 && col>3 && col<7) {somepos=4}
if (row>3 && row<7 && col>7) {somepos=5}
if (row>7 && col<3) {somepos=6}
if (row>7 && col>3 && col<7) {somepos=7}
if (row>7 && col>7) {somepos=8}
answergiven=somepos
stopcountdownearly()
}
else
{
showerror(row, col)
}
}

// End 5 --------------------------

// Exercise 6 Back to Front
// --------------------------

function subsidiarysetupexercise6()
{
changetextvalue("exercisedescription", 'After confirming your selection, or when the countdown ends, the letters in each row will be reversed, to make it clearer which contained the word (marked with a green tick).')

writescreen([[1,0,"blackcorrect"],[1,1,"blueD"],[1,2,"blueR"],[1,3,"blueA"],[1,4,"blueW"],[1,5,"blueL"],[1,6,"blueS"],[2,1,"blueD"],[2,2,"blueE"],[2,3,"blueT"],[2,4,"blueI"],[2,5,"blueA"],[2,6,"blueN"],[3,1,"blueD"],[3,2,"blueA"],[3,3,"blueB"],[3,4,"blueB"],[3,5,"blueD"],[3,6,"blueE"],[4,1,"blueF"],[4,2,"blueA"],[4,3,"blueL"],[4,4,"blueK"],[4,5,"blueE"],[4,6,"blueD"],[5,1,"blueC"],[5,2,"blueH"],[5,3,"blueO"],[5,4,"blueS"],[5,5,"blueO"],[5,6,"blueY"],[10,5,"ok"]])

}













function setupsubexercise6()
{
subexercisenumber++
clearscreen()

changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Press on the reversed word.  Your selection will be shown with a > on the left.  You may change your selection.  Press OK to finish the countdown early.')
var somesublist=exerciselevel
var somecharnums=exerciselevel+4
var somewordlist=thewordlist[somesublist]

var somelength=[4, 5, 6, 7, 8][exerciselevel-1]

var somewords=somewordlist.slice(8*(subexercisenumber-1), 8*(subexercisenumber-1)+somelength)

var someindex=randomnumber(somelength)-1

var somedisplays=[]
for (var i=0; i<somelength; i++)
{
somedisplays[i]=charlist(somewords[i])
if (i!=someindex)
{
somedisplays[i]=slightlymutated(somedisplays[i])
}
}

goal=[somelength, someindex+1, somecharnums]
originalorder=somedisplays
var somestartcol=somelength
for (var i=0; i<somedisplays.length; i++)
{
for (var j=somecharnums; j>0; j--)
{
changepiece(i+1, j, 'blue'+somedisplays[i][somecharnums-j])
// document.images['piece'+(i+1)+'_'+j].src='blue'+somedisplays[i][somecharnums-j]+'.gif'
}
}
changepiece(10,5,'ok')

answergiven=-1
exercisestate='selecting'

startcountdown()

}


function finish6()
{
var somestatus
if (answergiven==goal[1]) {somestatus='success'} else {somestatus='failure'}

exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
if (answergiven>=0)
{
somemessage='Incorrect! [Go]'
changepiece(answergiven, 0, 'blackwrong')
// document.images['piece'+(answergiven)+'_0'].src='blackwrong.gif'

}
else
{
somemessage='Time ran out! [Go]'

}
}

exercisestate='notrunning'
var somelength=goal[2]
for (var i=0; i<originalorder.length; i++)
{
for (var j=0; j<somelength; j++)
{
changepiece(i+1, j+1, 'blue'+originalorder[i][j])

// document.images['piece'+(i+1)+'_'+(j+1)].src='blue'+originalorder[i][j]+'.gif'
}
}
changepiece(goal[1], 0, 'blackcorrect')
// document.images['piece'+(goal[1])+'_0'].src='blackcorrect.gif'

changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)

}

function selectpiece6(row, col)
{
var piecename='piece'+row+'_'+col
var imagename=gifname(row, col)
if (exercisestate=='selecting' && imagename =='ok' && answergiven>=0)
{
stopcountdownearly()
return
}
if (exercisestate=='selecting' && imagename !='black' && imagename!='ok' && imagename!='blackgray>')
{
answergiven=row
resetcolumn(0)
changepiece(row, 0, 'blackgray>')

}
else
{
showerror(row, col)
}
}

function resetcolumn(somenum)
{
for (var i=0; i<11; i++)
{
changepiece(i, somenum, 'black')
}
}

// End 6--------------------------

// Exercise 7 - Memory
// --------------------------

function subsidiarysetupexercise7()
{
changetextvalue("exercisedescription", 'The images will then disappear, and you will see a row of ?s two rows below. Under a grey line are image buttons. Press these in the REVERSE order of the sequence you were asked to remember.')

writescreen([[3,5,"icon7"],[3,6,"icon6"],[3,7,"gray?"],[3,8,"gray?"],[3,9,"gray?"],[5,0,"greyline"],[5,1,"greyline"],[5,2,"greyline"],[5,3,"greyline"],[5,4,"greyline"],[5,5,"greyline"],[5,6,"greyline"],[5,7,"greyline"],[5,8,"greyline"],[5,9,"greyline"],[5,10,"greyline"],[6,3,"icon1"],[6,5,"icon2"],[6,7,"icon3"],[8,3,"icon4"],[8,5,"icon5"],[8,7,"icon6"],[10,3,"icon7"],[10,5,"icon8"],[10,7,"icon9"]])

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("subsidiarysetupexercise7b()", 10000)

}

function subsidiarysetupexercise7b()
{
changetextvalue("exercisedescription", 'Once every ? has been replaced with an image, the original images are redisplayed.  On the row below, these are shown reversed. Your solution is marked accordingly.')

writescreen([[1,5,"icon3"],[1,6,"icon8"],[1,7,"icon9"],[1,8,"icon6"],[1,9,"icon7"],[2,5,"icon7"],[2,6,"icon6"],[2,7,"icon9"],[2,8,"icon8"],[2,9,"icon3"],[2,10,"blackcorrect"], [3,5,"icon7"],[3,6,"icon6"],[3,7,"icon9"],[3,8,"icon3"],[3,9,"icon8"],[3,10,"blackwrong"],[5,0,"greyline"],[5,1,"greyline"],[5,2,"greyline"],[5,3,"greyline"],[5,4,"greyline"],[5,5,"greyline"],[5,6,"greyline"],[5,7,"greyline"],[5,8,"greyline"],[5,9,"greyline"],[5,10,"greyline"],[6,3,"icon1"],[6,5,"icon2"],[6,7,"icon3"],[8,3,"icon4"],[8,5,"icon5"],[8,7,"icon6"],[10,3,"icon7"],[10,5,"icon8"],[10,7,"icon9"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}


function setupsubexercise7()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Try to remember the sequence of the images during the countdown.')
var somenums=shufflearray([1, 2, 3, 4, 5, 6, 7, 8, 9])
var somelength=exerciselevel+3
var somemin=3
var someselected=somenums.slice(0, somemin)

for (var i=0; i<(somelength-somemin); i++)
{
someselected=someselected.concat([randomnumber(9)])
}

var someselected=shufflearray(someselected)

originalorder=someselected.concat([])
var somecol
for (var i=0; i<someselected.length; i++)
{
somecol=9-somelength+i+1
changepiece(1, somecol, 'icon'+someselected[i]+'')
}
exercisestate='countdown'

startcountdown()

}

var thechosen
function finish7()
{

var somelength=originalorder[0]
var somedisplayindices=originalorder[2]
answergiven=[]
var somerow
var somecol
clearscreen()
for (var i=0; i<11; i++)
{
changepiece(5, i, 'greyline')
}
var somelength=originalorder.length
for (var i=0; i<somelength; i++)
{
somecol=9-somelength+i+1
changepiece(3, somecol, 'gray?')
}
var somenums=shufflearray([1, 2, 3, 4, 5, 6, 7, 8, 9])
var someindex=0
for (var i=6; i<=10; i=i+2)
{
for (var j=3; j<=7; j=j+2)
{
changepiece(i, j, 'icon'+somenums[someindex])
someindex++

}

}
thechosen=[]
changetextvalue("exercisedescription", 'Now press the icons below the grey line in a sequence that is the REVERSE of the sequence you were asked to remember.')
exercisestate='selecting'


}


function selectpiece7(row, col)
{
var somestatus
var somenum
var imagename=gifname(row, col)
if (exercisestate=='selecting' && row>5 && imagename !='black')
{

somenum=(imagename.slice(imagename.length-1))*1

var somealready=thechosen.length
var somelength=originalorder.length
thechosen=thechosen.concat([somenum])

changepiece(3, 9-somelength+somealready+1, 'icon'+somenum+'')

if (thechosen.length==originalorder.length)
{
somestatus='success'
var somereverse=(originalorder.concat([])).reverse()
for (var i=0; i<somereverse.length; i++)
{
if (thechosen[i]!=somereverse[i])
{
somestatus='failure'
break
}
}

var somemessage
if (somestatus=='success')
{
changepiece(3, 10, 'blackcorrect')

exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
else
{
changepiece(3, 10, 'blackwrong')

somemessage='Incorrect! [Go]'
}


changepiece(2, 10, 'blackcorrect')

var somerow
var somecol
for (var i=0; i<somelength; i++)
{
somecol=9-somelength+i+1
changepiece(1, somecol, 'icon'+originalorder[i]+'')
changepiece(2, somecol, 'icon'+somereverse[i]+'')
}

exercisescoreposs++
totalscoreposs++
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)
}
}
else
{
showerror(row, col)
}

}




// End 7 --------------------------


// Exercise 8 Colour Confusion
// --------------------------

function subsidiarysetupexercise8()
{
changetextvalue("exercisedescription", 'A question is posed about these words, the answer to which is one of these four colours.  Press on the coloured square at the bottom corresponding to the answer.')


if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("subsidiarysetupexercise8b()", 10000)

}
function subsidiarysetupexercise8b()
{
changetextvalue("exercisedescription", 'Example: Colour named by word 5 rows above 1st word with blue-coloured text from bottom?<br>We identify the top word (<), so the answer is "red".')

writescreen([[0,0,"white"],[0,1,"white"],[0,2,"white"],[0,3,"white"],[0,4,"white"],[0,5,"white"],[0,6,"blueR"],[0,7,"blueE"],[0,8,"blueD"],[0,9,"leftarrow"],[0,10,"white"],[1,0,"white"],[1,1,"white"],[1,2,"white"],[1,3,"redO"],[1,4,"redR"],[1,5,"redA"],[1,6,"redN"],[1,7,"redG"],[1,8,"redE"],[1,9,"white"],[1,10,"white"],[2,0,"white"],[2,1,"white"],[2,2,"white"],[2,3,"orangeV"],[2,4,"orangeI"],[2,5,"orangeO"],[2,6,"orangeL"],[2,7,"orangeE"],[2,8,"orangeT"],[2,9,"white"],[2,10,"white"],[3,0,"white"],[3,1,"white"],[3,2,"white"],[3,3,"white"],[3,4,"white"],[3,5,"redB"],[3,6,"redL"],[3,7,"redU"],[3,8,"redE"],[3,9,"white"],[3,10,"white"],[4,0,"white"],[4,1,"white"],[4,2,"white"],[4,3,"violetV"],[4,4,"violetI"],[4,5,"violetO"],[4,6,"violetL"],[4,7,"violetE"],[4,8,"violetT"],[4,9,"white"],[4,10,"white"],[5,0,"white"],[5,1,"white"],[5,2,"white"],[5,3,"white"],[5,4,"white"],[5,5,"white"],[5,6,"blueR"],[5,7,"blueE"],[5,8,"blueD"],[5,9,"white"],[5,10,"white"],[6,0,"white"],[6,1,"white"],[6,2,"white"],[6,3,"orangeO"],[6,4,"orangeR"],[6,5,"orangeA"],[6,6,"orangeN"],[6,7,"orangeG"],[6,8,"orangeE"],[6,9,"white"],[6,10,"white"],[9,2,"blackcorrect"],[10,2,"red"],[10,4,"orange"],[10,6,"blue"],[10,8,"violet"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}

function setupsubexercise8()
{

subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", '')

var sometotalnum=exerciselevel+4

var somecolours=['red', 'blue', 'orange', 'violet']
var somenames=['red', 'blue', 'orange', 'violet']
var sometexts=['RED', 'BLUE', 'ORANGE', 'VIOLET']

var somecolournames=[]

var allcolours=shufflearray(somecolours.concat(somecolours).concat(somecolours)).slice(0, sometotalnum)
var allnames=shufflearray(somenames.concat(somenames).concat(somenames)).slice(0, sometotalnum)
var someanswerrequired=randomnumber(2)-1

var alltextcolours=[[], [], [], []]
var allcolournames=[[], [], [], []]
var identicalcolourandname=[]
var allletters=[[], [], [], [], [], [], []]
var somecardinals=['1', '2', '3', '4', '5', '6', '7', '8', '9', '10']
var someordinals=['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th']

var somecolour
var somename
var somecolourindex
var somenameindex
var somelength
var somedescriptions=[]

for (var i=0; i<sometotalnum; i++)
{
if (exerciselevel==1)
{
somedescriptions[i]=[someordinals[i]+' word from top', someordinals[sometotalnum-i-1]+' word from bottom']
}
else
{
somedescriptions[i]=[]

}
}
for(var i=0; i<allcolours.length; i++)
{
somecolour=allcolours[i]
somename=allnames[i]
if (somename==somecolour) {identicalcolourandname=identicalcolourandname.concat([i])}
somecolourindex=ith(somecolour, somecolours)
somenameindex=ith(somename, somenames)
alltextcolours[somecolourindex]=alltextcolours[somecolourindex].concat([i])
allcolournames[somenameindex]=allcolournames[somenameindex].concat([i])
somelength=charlist(allnames[i]).length
allletters[somelength]=allletters[somelength].concat([i])
}

var someindex
var someanalysis
var sometext
for (var i=0; i<4; i++)
{
somecolour=somecolours[i]
sometext=sometexts[i]
someanalysis=alltextcolours[i]

if (someanalysis.length>0 && (exerciselevel>2 || (exerciselevel==2 && someanswerrequired==1)))
{
someindex=someanalysis[0]
somedescriptions[someindex]=somedescriptions[someindex].concat(['top word with '+somecolour+' text'])
someindex=someanalysis[someanalysis.length-1]
somedescriptions[someindex]=somedescriptions[someindex].concat(['bottom word with '+somecolour+' text'])

if (someanalysis.length==1) {somedescriptions[someindex]=somedescriptions[someindex].concat(['only word with '+somecolour+' text'])}

for (var j=0; j<someanalysis.length; j++)
{
someindex=someanalysis[j]
somedescriptions[someindex]=somedescriptions[someindex].concat([someordinals[j]+' word with '+somecolour+' text from top', someordinals[someanalysis.length-j-1]+' word with '+somecolour+' text from bottom'])
}

}
if (allcolournames[i].length>0 && (exerciselevel>2 || (exerciselevel==2 && someanswerrequired==0)))
{
someanalysis=allcolournames[i]
someindex=someanalysis[0]
somedescriptions[someindex]=somedescriptions[someindex].concat(['top word naming '+somecolour])
someindex=someanalysis[someanalysis.length-1]
somedescriptions[someindex]=somedescriptions[someindex].concat(['bottom word naming '+somecolour])
if (someanalysis.length==1) {somedescriptions[someindex]=somedescriptions[someindex].concat(['only word naming '+somecolour])}
for (var j=0; j<someanalysis.length; j++)
{
someindex=someanalysis[j]
somedescriptions[someindex]=somedescriptions[someindex].concat([someordinals[j]+' word naming '+somecolour+' from top', someordinals[someanalysis.length-j-1]+' word naming '+somecolour+' from bottom'])
}


}
}
if (identicalcolourandname.length>0)
{

someanalysis=identicalcolourandname

someindex=someanalysis[0]
if (exerciselevel>1)
{
somedescriptions[someindex]=somedescriptions[someindex].concat(['top word with name/text colour match'])
someindex=someanalysis[someanalysis.length-1]
somedescriptions[someindex]=somedescriptions[someindex].concat(['bottom word with name/text colour match'])
}
if (someanalysis.length==1) {somedescriptions[someindex]=somedescriptions[someindex].concat(['only word with name/text colour match'])}
if (exerciselevel>1)
{
for (var j=0; j<someanalysis.length; j++)
{
someindex=someanalysis[j]
somedescriptions[someindex]=somedescriptions[someindex].concat([someordinals[j]+' word with name/text colour match from top', someordinals[someanalysis.length-j-1]+' word with name/text colour match from bottom'])
}

}
}

if (exerciselevel>1)
{
for (var i=0; i<allletters.length; i++)
{
var somecardinal=somecardinals[i-1]
if (allletters[i].length>0)
{
someanalysis=allletters[i]

someindex=someanalysis[0]
somedescriptions[someindex]=somedescriptions[someindex].concat(['top '+somecardinal+'-letter word'])
someindex=someanalysis[someanalysis.length-1]
somedescriptions[someindex]=somedescriptions[someindex].concat(['bottom '+somecardinal+'-letter word'])
if (someanalysis.length==1) {somedescriptions[someindex]=somedescriptions[someindex].concat(['only '+somecardinal+'-letter word'])}

for (var j=0; j<someanalysis.length; j++)
{
someindex=someanalysis[j]
somedescriptions[someindex]=somedescriptions[someindex].concat([someordinals[j]+' '+somecardinal+'-letter word from top', someordinals[someanalysis.length-j-1]+' '+somecardinal+'-letter word from bottom'])
}


}

}
}
/*
var somealerttext=''
for (var i=0; i<somedescriptions.length; i++)
{
somealerttext=somealerttext+somedescriptions[i]+'<br><br>'

}
alert(somealerttext)
*/
var somelineindex=randomnumber(sometotalnum)-1 // the index to be selected
var somequestion=['Text colour of ', 'Colour named by '][someanswerrequired]

var somelinedescription=shufflearray(somedescriptions[somelineindex])[0]
var somegoalindex
if (exerciselevel<=2) 
{
somegoalindex=somelineindex; somedescription=somelinedescription
changetextvalue("exercisedescription", somequestion+somedescription+'?')
goal=[allcolours, allnames][someanswerrequired][somegoalindex]


}
if (exerciselevel==3)
{
var somegoalindex=differentrandomnumber(sometotalnum, somelineindex+1)-1
if (somegoalindex>somelineindex)
{
var somediff=somegoalindex-somelineindex
var somerows=' rows '
if (somediff==1) {somerows=' row '}
somedescription='word '+somecardinals[somediff-1]+somerows+'below '+somelinedescription
}
else
{
var somediff=somelineindex-somegoalindex
var somerows=' rows '
if (somediff==1) {somerows=' row '}
somedescription='word '+somecardinals[somediff-1]+somerows+'above '+somelinedescription

}
changetextvalue("exercisedescription", somequestion+somedescription+'?')
goal=[allcolours, allnames][someanswerrequired][somegoalindex]


}
if (exerciselevel>=4)
{

var someplusminus=randomnumber(2)-1
if (someplusminus==1)
{
var somediff=(sometotalnum-1)-somelineindex

if (somediff<2) {someplusminus=0; somediff=somelineindex}
}
else // someplusminus=0
{
var somediff=somelineindex
if (somediff<2) {someplusminus=1; somediff=(sometotalnum-1)-somelineindex}
}
somediff=Math.floor(somediff/2)
var somedelta=2*randomnumber(somediff)
var somelineindex2=somelineindex+somedelta
if (someplusminus==0) {somelineindex2=somelineindex-somedelta}
var somelinedescription2=shufflearray(somedescriptions[somelineindex2])[0]
somemidwayindex=(somelineindex+somelineindex2)/2
if (exerciselevel==4)
{
somegoalindex=somemidwayindex
changetextvalue("exercisedescription", somequestion+'word halfway between '+somelinedescription+' and '+somelinedescription2+'?')
goal=[allcolours, allnames][someanswerrequired][somegoalindex]


}
else // level=5
{

somegoalindex=differentrandomnumber(sometotalnum, somemidwayindex+1)-1
if (somegoalindex>somemidwayindex)
{
somediff=somegoalindex-somemidwayindex
var somerows=' rows '
if (somediff==1) {somerows=' row '}
somedescriptionsupp='word '+somecardinals[somediff-1]+somerows+'below '
}
else
{
somediff=somemidwayindex-somegoalindex
var somerows=' rows '
if (somediff==1) {somerows=' row '}
somedescriptionsupp='word '+somecardinals[somediff-1]+somerows+'above '

}
changetextvalue("exercisedescription", somequestion+somedescriptionsupp+'word halfway between '+somelinedescription+' and '+somelinedescription2+'?')
goal=[allcolours, allnames][someanswerrequired][somegoalindex]



}
}

originalorder=somegoalindex



var somecharlist
for (var i=0; i<sometotalnum; i++)
{
for (var j=0; j<width; j++)
{
changepiece(i, j, 'white')
}
somecolour=allcolours[i]
somename=allnames[i]
sometext=sometexts[ith(somename, somenames)]
somecharlist=charlist(sometext)
for (var j=0; j<somecharlist.length; j++)
{
changepiece(i, 9-somecharlist.length+j, somecolour+somecharlist[j]+'')
}
}
changepiece(10, 2, 'red')
changepiece(10, 4, 'orange')
changepiece(10, 6, 'blue')
changepiece(10, 8, 'violet')

exercisestate='selecting'

startcountdown()

}

function finish8()
{
var somestatus
if (answergiven==goal) {somestatus='success'} else {somestatus='failure'}

var somecolours=['red', 'orange', 'blue', 'violet']
exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
if (countdownend=='early')
{

var somen=ith(answergiven, somecolours)
changepiece(9, 2*somen+2, 'blackwrong')
somemessage='Incorrect! [Go]'
}
else
{
somemessage='Time ran out! [Go]'

}
}
var somen1=ith(goal, somecolours)
changepiece(9, 2*somen1+2, 'blackcorrect')
changepiece(originalorder, 9, 'leftarrow')
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", gettextvalue("exercisedescription")+' '+somemessage)

}

function selectpiece8(row, col)
{
var piecename='piece'+row+'_'+col
var imagename=gifname(row, col)
if (exercisestate=='selecting' && row==10 && imagename !='black')
{
answergiven=imagename
stopcountdownearly()

}
else
{
showerror(row, col)
}
}

// End 8 --------------------------

// Exercise 9 Probability
// --------------------------



function subsidiarysetupexercise9()
{
changetextvalue("exercisedescription", 'Here, 13 is the most likely total, with 3 ways of achieving it: 7+6, 6+7 and 6+7 (there are two green 7s). You will receive information about the problem solution.')

writescreen([[0,8,"white"],[0,9,"white"],[0,10,"white"],[1,2,"lightbluetile7"],[1,5,"lightgreentile9"],[1,8,"white"],[1,9,"white"],[1,10,"white"],[2,2,"lightbluetile6"],[2,5,"lightgreentile7"],[2,8,"blue1"],[2,9,"blue3"],[2,10,"whitecorrect"],[3,2,"lightbluetile8"],[3,5,"lightgreentile6"],[3,8,"white"],[3,9,"white"],[3,10,"white"],[4,2,"lightbluetile1"],[4,5,"lightgreentile7"],[4,8,"blue1"],[4,9,"blue0"],[4,10,"white"],[5,8,"white"],[5,9,"white"],[5,10,"white"],[6,8,"white"],[6,9,"blue8"],[6,10,"white"],[7,8,"white"],[7,9,"white"],[7,10,"white"],[8,8,"white"],[8,9,"blue7"],[8,10,"white"],[9,8,"white"],[9,9,"white"],[9,10,"white"],[10,8,"white"],[10,9,"white"],[10,10,"white"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}

function setupsubexercise9()
{
subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Press the number on the right with the highest probability of being the sum of one randomly-drawn blue tile and one randomly-drawn green tile.')

var numbags=2
var numtiles=[3, 4, 5, 6, 7][exerciselevel-1]
var initials=thenumerals


var someok=0
while (someok==0)
{
var sometiles=[shufflearray(initials).slice(0, 3), shufflearray(initials).slice(0, 3)]
for (var i=0; i<2; i++)
{
for (var j=3; j<numtiles; j++)
{
sometiles[i][j]=randomnumber(9)
}
}
for (var i=0; i<height; i++)
{
changepiece(i, 8, 'white')
changepiece(i, 9, 'white')
changepiece(i, 10, 'white')
}
var tilecolours=['lightblue', 'lightgreen']
for (var i=0; i<sometiles.length; i++)
{
for (var j=0; j<sometiles[i].length; j++)
{
changepiece(j+1, 2+(3*i), tilecolours[i]+'tile'+sometiles[i][j]+'')
}
}

var sometotals=[]
sometiles[0]=sometiles[0].sort(numbersort)
sometiles[1]=sometiles[1].sort(numbersort)
for (var j=0; j<numtiles; j++)
{
for (var k=0; k<numtiles; k++)
{
sometotals=sometotals.concat([sometiles[0][j]+sometiles[1][k]])
}

}

somemin=sometiles[0][0]+sometiles[1][0]
somemax=sometiles[0][numtiles-1]+sometiles[1][numtiles-1]
var somedist=[]
for (var i=0; i<=18; i++)
{
somedist[i]=[i, 0]
}

for (var i=0; i<sometotals.length; i++)
{

somedist[sometotals[i]][1]=somedist[sometotals[i]][1]+1

}
somedist=somedist.concat([[19, 0], [20, 0], [21, 0]])
order=somedist
var somenewdist=[]
somenewdist=copyvalues(shufflearray(somedist)).sort(quantitynums)
var someindex=0
var somegoal=somenewdist[someindex][0]
var someoccs=somenewdist[someindex][1]

var someothers=[]
var someotherpairs=[]
for (var i=0; i<somenewdist.length; i++)
{
if (somenewdist[i][1]<someoccs && somenewdist[i][1]>0)
{
someothers=someothers.concat([somenewdist[i][0]])
}
}
if (someothers.length>=3) {someok=1}
}
someothers=someothers.slice(0, 3)

var someprops=[somegoal].concat(someothers)
originalorder=someprops
var somerows=shufflearray([2, 4, 6, 8])
goal=somerows[0]
var somechars
for (var i=0; i<someprops.length; i++)
{
somechars=charlist(someprops[i]+'')
for (var j=0; j<somechars.length; j++)
{
changepiece(somerows[i], 10-somechars.length+j, 'blue'+somechars[j]+'')
}

}
answergiven=-1
exercisestate='selecting'

startcountdown()

}


function finish9()
{
var somefeedback='<br>'
for (var i=0; i<originalorder.length; i++)
{
somefeedback=somefeedback+'No. of ways of getting '+originalorder[i]+' is '+order[originalorder[i]][1]+'<br>'

}
var somestatus
if (answergiven==goal) {somestatus='success'} else {somestatus='failure'}

exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct! [Go]'
}
if (somestatus=='failure')
{
if (countdownend=='early')
{
somemessage='Incorrect! [Go]'
changepiece(answergiven, 10, 'whitewrong')

}
else
{
somemessage='Time ran out! [Go]'

}
}

exercisestate='notrunning'
var somelength=goal[2]
changepiece(goal, 10, 'whitecorrect')

changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage + somefeedback)

}

function selectpiece9(row, col)
{
var imagename=gifname(row, col)
if (exercisestate=='selecting' && col>7 && member(row, [2, 4, 6, 8]))
{
answergiven=row
stopcountdownearly()

}
else
{
showerror(row, col)
}
}

// End 9 --------------------------

// Exercise 10 Picnic
// --------------------------

function subsidiarysetupexercise10()
{
changetextvalue("exercisedescription", 'Collect each of the required items plus a different item. As you do so, they are highlighted and shown above the required items. Press up-arrow to go back.')
writescreen([[0,1,"picnic8"],[0,2,"picnic4"],[0,3,"picnic2"],[0,4,"greypicnic9"],[0,5,"picnic1"],[0,6,"picnic7"],[0,7,"picnic6"],[0,8,"picnic5"],[0,9,"picnic3"],[1,1,"picnic8"],[1,2,"picnic1"],[1,3,"picnic2"],[1,4,"picnic4"],[1,5,"greypicnic7"],[1,6,"picnic3"],[1,7,"picnic9"],[1,8,"picnic5"],[1,9,"picnic6"],[2,1,"picnic3"],[2,2,"picnic7"],[2,3,"picnic6"],[2,4,"picnic4"],[2,5,"greypicnic8"],[2,6,"picnic9"],[2,7,"picnic2"],[2,8,"picnic1"],[2,9,"picnic5"],[3,1,"picnic6"],[3,2,"picnic1"],[3,3,"picnic9"],[3,4,"picnic2"],[3,5,"picnic7"],[3,6,"greypicnic5"],[3,7,"picnic3"],[3,8,"picnic8"],[3,9,"picnic4"],[4,4,"tablecloth"],[4,5,"tablecloth"],[4,6,"tablecloth"],[5,3,"picnic7"],[5,4,"picnic5"],[5,5,"picnic8"],[5,6,"picnic9"],[6,3,"picnicunknown"],[6,4,"picnic5"],[6,5,"picnic8"],[6,6,"picnic9"],[10,5,"backuparrow"]])
if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("startingreminder()", 10000)

}

function setupsubexercise10()
{
if (responsetimer != null) {clearTimeout(responsetimer)}

subexercisenumber++
clearscreen()
changetextvalue("subexercisenumber", subexercisenumber)
changetextvalue("exercisedescription", 'Move from top to bottom collecting the items shown below the chequered area, plus a different one.  Move vertically or diagonally ending next to the chequered area. Press up-arrow to go back.')

var somenumrows=exerciselevel+2
var somenumwanted=somenumrows-1
var somenumbers=shufflearray(thenumbers)
var somewanted=somenumbers.slice(0, somenumwanted)
var sometablelength=3
var somepath=shufflearray(somenumbers.slice(0, somenumwanted+1))
goal=copysimplevalues(somewanted)
var somematrix=[]
for (var i=0; i<somenumrows; i++)
{
somematrix[i]=[]
for (var j=0; j<9; j++)
{
somematrix[i][j]=-1
}
}
var sometop=0
var somedirections=shufflearray([1, -1, 1, -1, 1, -1, 1,  1,  1,  1,  1,  0, 0]).slice(0, somenumwanted+1)
var somechanger=shufflearray([-1, 1])[0]
for (var i=0; i<somedirections.length; i++)
{
somedirections[i]=somedirections[i]*somechanger
}
var someendpos=randomnumber(sometablelength)-1
var somematrixcol=3+someendpos
var somematrixbottom=somenumrows-1
var someendrow=sometop+somenumrows
var somefixedroute=[[somematrixbottom+1, somematrixcol]]
var somerow
var somecol
var someindex
for (var i=somematrixbottom; i>=0; i--)
{
someindex=somematrixbottom-i
somerow=i
somecol=somefixedroute[someindex][1]+somedirections[someindex]

if (somecol<0) {somecol=1}
if (somecol>8) {somecol=7}
somefixedroute=somefixedroute.concat([[somerow, somecol]])

}

somefixedroute=somefixedroute.slice(1)
originalorder=[sometop, 1, copyvalues(somefixedroute)]
for (var i=0; i<somepath.length; i++)
{
somematrix[somefixedroute[i][0]][somefixedroute[i][1]]=somepath[i]
}
var somerem
var someindex2
for (var i=0; i<somematrix.length; i++)
{
someindex=somematrix.length-i-1
somerem=shufflearray(removeElement(ith(somepath[someindex], thenumbers), thenumbers).slice(0, 8))

someindex2=0
for (var j=0; j<somematrix[i].length; j++)
{
if (somematrix[i][j]==-1)
{
somematrix[i][j]=somerem[someindex2]
someindex2++
}
}
}


for (var i=0; i<somematrix.length; i++)
{
for (var j=0; j<somematrix[i].length; j++)
{
changepiece(i+sometop, j+1, 'picnic'+somematrix[i][j]+'')
}
}





for (var i=4; i<4+sometablelength; i++)
{
changepiece(someendrow, i, 'tablecloth')
}

var somewantedstart=6-Math.floor((somenumwanted+1)/2)
for (var i=0; i<somewanted.length; i++)
{
changepiece(someendrow+2, somewantedstart+i, 'picnic'+somewanted[i]+'')
}
changepiece(someendrow+2, somewantedstart-1, 'picnicunknown')

var somelastpaths=[]
for (var i=3; i<3+sometablelength; i++)
{
somelastpaths[i-3]=[[i], [], []]
}
var somenewpaths=[]
var somepath


var somenewpath
var someelement 

for (var i=somematrixbottom; i>=0; i--)
{
someindex=somematrixbottom-i
somenewpaths=[]
for (var j=0; j<somelastpaths.length; j++)
{
somepath=somelastpaths[j]
for (var k=-1; k<=1; k++)
{
somecol=somepath[0][0]+k
somenewpath=[]
if (somecol>=0 && somecol<=8)
{
someelement=somematrix[i][somecol]
if (member(someelement, somewanted)==true && member(someelement, somepath[1])==false)
  {
  somenewpath=[[somecol].concat(somepath[0]), [someelement].concat(somepath[1]), somepath[2]]
  }
if (member(someelement, somewanted)==false && somepath[2].length==0)
  {
  somenewpath=[[somecol].concat(somepath[0]), somepath[1], [someelement]]
  }
if (somenewpath.length!=0) {somenewpaths=[somenewpath].concat(somenewpaths)}
}
}

}
somelastpaths=somenewpaths
}
var someuniquepaths=[]
var somebeg
for (var i=0; i<somelastpaths.length; i++)
{
somebeg=somelastpaths[i][0].slice(0, somenumrows)
if (listismember(somebeg, someuniquepaths)==false) {someuniquepaths=someuniquepaths.concat([somebeg])}
}
originalorder[3]=someuniquepaths.length
originalorder[4]=somewantedstart
/*
for (var k=0; k<someuniquepaths.length; k++)
{
var somelist=someuniquepaths[k]
for (var i=0; i<somematrix.length; i++)
{
for (var j=0; j<somematrix[i].length; j++)
{
changepiece(i+sometop, j+1, 'picnic'+somematrix[i][j]+'')
}
}
for (var i=0; i<somenumrows; i++)
{
somerow=sometop+i
somecol=1+somelist[i]
changepiece(somerow, somecol, 'grey'+gifname(somerow, somecol)+'')
}
}
*/
changepiece(10,5,'backuparrow')
order=somematrix
clicksexpected=[sometop, [1, 2, 3, 4, 5, 6, 7, 8, 9]]
answergiven=[[], [], []]
exercisestate='selecting'

startcountdown()



}

function displaysolution10()
{

var someuniquepath=originalorder[2]
var somematrix=order
var sometop=originalorder[0]
var someleft=originalorder[1]
var somelist=someuniquepath
for (var i=0; i<somematrix.length; i++)
{
for (var j=0; j<somematrix[i].length; j++)
{
changepiece(i+sometop, j+someleft, 'picnic'+somematrix[i][j]+'')
}
}
for (var i=0; i<somelist.length; i++)
{
somerow=sometop+somelist[i][0]
somecol=someleft+somelist[i][1]
changepiece(somerow, somecol, 'grey'+gifname(somerow, somecol)+'')
}
changetextvalue("exercisedescription", 'Now displaying one correct path. [Go]')

}

function finish10()
{
var somestatus='failure'
if (answergiven[0].length==goal.length && answergiven[1].length==1)
{
somestatus='success'
}

exercisescoreposs++
totalscoreposs++

var somemessage
if (somestatus=='success')
{
exercisescore++
totalscore++
somemessage='Correct!<br>The number of possible correct paths was '+originalorder[3]+'<br>[Go]'
}
if (somestatus=='failure')
{
if (responsetimer != null) {clearTimeout(responsetimer)}
responsetimer= setTimeout('displaysolution10()', 5000)

if (countdownend=='early')
{
somemessage='Incorrect!<br>The number of possible correct paths was '+originalorder[3]+'<br>[Go], or wait to see a correct path displayed.'
}
else
{
somemessage='Time ran out!<br>The number of possible correct paths was '+originalorder[3]+'<br>[Go], or wait to see a correct path displayed.'

}
}
exercisestate='notrunning'
changetextvalue("exercisescore", exercisescore)
changetextvalue("exercisescoreposs", exercisescoreposs)
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
changetextvalue("exercisedescription", somemessage)

}

function selectpiece10(row, col)
{
var someimage=gifname(row, col)
if (exercisestate=='selecting' && someimage=='backuparrow' && answergiven[2].length!=0)
{
var somelastdetails=answergiven[2][answergiven[2].length-1]
answergiven[2]=answergiven[2].slice(0, answergiven[2].length-1)
var somerow=somelastdetails[0]-originalorder[0]
var somecol=somelastdetails[1]-originalorder[1]
var someval=order[somerow][somecol]
changepiece(somelastdetails[0], somelastdetails[1], 'picnic'+someval)
if (member(someval, answergiven[0])==true)
{
answergiven[0]=removeElement(ith(someval, answergiven[0]), answergiven[0])
}
else
{
answergiven[1]=[]
}
clicksexpected[0]=clicksexpected[0]-1
clicksexpected[1]=somelastdetails[3].concat([])
// remove item from collection display
var somecrow=exerciselevel+3
var somecimage
for (var i=0; i<11; i++)
{
somecimage=gifname(somecrow, i)
if (somecimage.slice(somecimage.length-1)==someval) {changepiece(somecrow, i, 'black'); break}

}
return
}
if (exercisestate=='selecting' && row==clicksexpected[0] && member(col, clicksexpected[1])==true)
{
var somerow=row-originalorder[0]
var somecol=col-originalorder[1]
var someval=order[somerow][somecol]
var somecheck='notok'
var somewantedstart=originalorder[4]
var somepos
if (member(someval, goal)==true && member(someval, answergiven[0])==false)
{
answergiven[0]=answergiven[0].concat([someval])
somecheck='ok'
somepos=ith(someval, goal)
changepiece(originalorder[0]+order.length+1, somewantedstart+somepos, 'picnic'+someval+'')
answergiven[2]=answergiven[2].concat([[row, col, someval, clicksexpected[1].concat([])]])
}

if (member(someval, goal)==false && answergiven[1].length==0)
{
answergiven[1]=[someval]
somecheck='ok'
changepiece(originalorder[0]+order.length+1, somewantedstart-1, 'picnic'+someval+'')
answergiven[2]=answergiven[2].concat([[row, col, someval, clicksexpected[1].concat([])]])

}
if (somecheck=='ok')
{
changepiece(row, col, 'greypicnic'+someval+'')
if (answergiven[0].length==goal.length && answergiven[1].length==1)
{
stopcountdownearly()
return
}
else
{
clicksexpected[0]=clicksexpected[0]+1
var somelist=[]
var somenewcol
var somerange1=0
var somerange2=8
if (clicksexpected[0]==exerciselevel+1) 
{
somerange1=2
somerange2=6
}
for (var k=-1; k<=1; k++)
{
somenewcol=somecol+k
if (somenewcol>=somerange1 && somenewcol<=somerange2)
   {
   somelist=somelist.concat([somenewcol+originalorder[1]])
   }
}
clicksexpected[1]=somelist
return
}
}

}

showerror(row, col)

}

// End 10 --------------------------

// Exercise 11 Scores and Profile
// --------------------------


var therecommendations

function handlescoresandprofile()
{
exerciseordernumber=11
exercisenumber=11
totalscore=0
totalscoreposs=numberexercisesperset*10
for (var i=1; i<thescores.length; i++)
{
totalscore=totalscore+thescores[i]
}
changetextvalue("exerciselevel", '')
changetextvalue("basetimeavailable", '')
changetextvalue("timeavailable", '')
changetextvalue("exerciseordernumber", '')
changetextvalue("subexercisenumber", '')
changetextvalue("exercisescore", '')
changetextvalue("exercisescoreposs", '')
changetextvalue("totalscore", totalscore)
changetextvalue("totalscore2", totalscore)
changetextvalue("totalscoreposs", totalscoreposs)
var sometext=''
var somescore
var somehighscore
var somelevel
var sometime
var somestandardtime
var someexercisenumber
var somename
var somechars=twochars(totalscore)
clearscreen()
changepiece(0,0, 'inverse ')
changepiece(0,1, 'inverse ')
changepiece(0,2, 'inverse'+somechars[0])
changepiece(0,3, 'inverse'+somechars[1])
changepiece(0,4, 'white')
changepiece(0,5, 'blueL')
changepiece(0,6, 'white')
changepiece(0,7, 'white')
changepiece(0,8, 'blueT')
changepiece(0,9, 'blues')
changepiece(0,10, 'orangeok')
var somerecommendations=[['', '', '', '']]
for (var i=1; i<=10; i++)
{
somelevel=theprofiles[thecurrentuser][0][i][0]
sometime=theprofiles[thecurrentuser][0][i][1]
somehighscore=theprofiles[thecurrentuser][0][i][2]
somescore=thescores[i]
someexercisenumber=exerciseorder[i]

somename=exercises[someexercisenumber][1]
somestandardtime=exercises[someexercisenumber][2][somelevel-1]
somechars=twochars(i)
somerecommendations[i]=['', '', '', '']

if (somescore==0 && somelevel>1 && sometime>=somestandardtime) {somerecommendations[i][0]='orange'}
if (somescore==0 && somelevel>1 && sometime<somestandardtime) {somerecommendations[i][3]='orange'}
if (somescore==0 && somelevel==1) {somerecommendations[i][3]='orange'}
if (numberexercisesperset>=4)
{
if (somescore==1 && somelevel>1) {somerecommendations[i][3]='orange'}
}
if (somescore==numberexercisesperset && somelevel<5 && sometime<=somestandardtime) {somerecommendations[i][1]='orange'}
if (somescore==numberexercisesperset && somelevel<5 && sometime>somestandardtime) {somerecommendations[i][2]='orange'}
if (somescore==numberexercisesperset && somelevel==5) {somerecommendations[i][2]='orange'}

changepiece(i,0, 'blue'+somechars[0]+'')
changepiece(i,1, 'blue'+somechars[1]+'')
changepiece(i,2, 'white')
changepiece(i,3, 'green'+somescore)
changepiece(i,4, somerecommendations[i][0]+'downarrow')
changepiece(i,5,'red'+somelevel+'')
changepiece(i,6, somerecommendations[i][1]+'uparrow')
somechars=twochars(sometime)
changepiece(i,7, somerecommendations[i][2]+'downarrow')
changepiece(i,8,'red'+somechars[0]+'')
changepiece(i,9,'red'+somechars[1]+'')
changepiece(i,10, somerecommendations[i][3]+'uparrow')

if (somescore>somehighscore) {theprofiles[thecurrentuser][0][i][2]=somescore}
}
therecommendations=somerecommendations
if (totalscore>theprofiles[thecurrentuser][1]) {theprofiles[thecurrentuser][1]=totalscore}
if (totalscore>theprofiles[thecurrentuser][2]) {theprofiles[thecurrentuser][2]=totalscore}

updateprofilecookie()

sometext=sometext+'Total: '+totalscore+' Highest ever: '+theprofiles[thecurrentuser][2]
sometext=sometext+'<br>You can update your profile using the arrows. Recommended changes are shown by orange arrows. Press OK to accept.'
changetextvalue("exercisedescription", sometext)

if (responsetimer != null) {clearTimeout(responsetimer)}

responsetimer= setTimeout("showrecords1()", 8000)

}

function showrecords1()
{
var somehighscore
var somescore
var sometext
var someexercisenumber
var sometext='Profile highs: Total '+theprofiles[thecurrentuser][1]+'<br><table style="text-align:center;color:red" border=1 cellspacing=0 cellpadding=0 align=center>'
for (var i=1; i<=5; i++)
{
somehighscore=theprofiles[thecurrentuser][0][i][2]
sometext=sometext+'<tr><td align=left>Exercise '+(2*i-1)+'</td><td>&nbsp;&nbsp;'+theprofiles[thecurrentuser][0][2*i-1][2]+'&nbsp;&nbsp;</td><td align=left>Exercise '+((2*i))+'</td><td>&nbsp;&nbsp;'+theprofiles[thecurrentuser][0][(2*i)][2]+'&nbsp;&nbsp;</td></tr>'
}
sometext=sometext+'</table>'

changetextvalue("exercisedescription", sometext)

if (responsetimer != null) {clearTimeout(responsetimer)}

}




function acceptrecommendations()
{
for (var i=0;i<therecommendations.length; i++)
{
if (therecommendations[i][0]=='orange') {changelevelprofile(i, -1)}
if (therecommendations[i][1]=='orange') {changelevelprofile(i, 1)}
if (therecommendations[i][2]=='orange') {changetimeprofile(i, -1)}
if (therecommendations[i][3]=='orange') {changetimeprofile(i, 1)}
}
}

function resetrecommendations()
{
for (var i=0; i<therecommendations.length; i++)
{
therecommendations[i]=['','','','']
}
}

function selectpiece11(row, col)
{
if (row>0 && col==4)
{
changelevelprofile(row, -1)
}
if (row>0 && col==6)
{
changelevelprofile(row, 1)
}
if (row>0 && col==7)
{
changetimeprofile(row, -1)
}
if (row>0 && col==10)
{
changetimeprofile(row, 1)
}
if (row==0 && col==10)
{
acceptrecommendations()
}

}

function changelevelprofile(someexercise, someval)
{
var somelevel=theprofiles[thecurrentuser][0][someexercise][0]

var somenewlevel=somelevel+someval
if (somenewlevel==6) {somenewlevel=5}
if (somenewlevel==0) {somenewlevel=1}
theprofiles[thecurrentuser][0][someexercise][0]=somenewlevel
theprofiles[thecurrentuser][0][someexercise][2]=0
theprofiles[thecurrentuser][1]=0

var somenewtime=exercises[someexercise][2][somenewlevel-1]
if (somenewlevel!=somelevel) 
{
theprofiles[thecurrentuser][0][someexercise][1]=somenewtime
var somechars=twochars(somenewtime)
changepiece(someexercise, 7, 'downarrow')
changepiece(someexercise, 8, 'red'+somechars[0]+'')
changepiece(someexercise, 9, 'red'+somechars[1]+'')
changepiece(someexercise, 10, 'uparrow')

}
updateprofilecookie()

changepiece(someexercise, 4, 'downarrow')
changepiece(someexercise, 5, 'red'+somenewlevel+'')
changepiece(someexercise, 6, 'uparrow')

therecommendations[someexercise]=['','','','']

}

function changetimeprofile(someexercise, someval)
{
var sometime=theprofiles[thecurrentuser][0][someexercise][1]

var somenewtime=sometime+someval
if (somenewtime==0) {somenewtime=1}
if (somenewtime==100) {somenewtime=99}
theprofiles[thecurrentuser][0][someexercise][1]=somenewtime
theprofiles[thecurrentuser][0][someexercise][2]=0
theprofiles[thecurrentuser][1]=0
theprofiles=theprofiles
updateprofilecookie()

var somechars=twochars(somenewtime)
changepiece(someexercise, 7, 'downarrow')
changepiece(someexercise, 8, 'red'+somechars[0]+'')
changepiece(someexercise, 9, 'red'+somechars[1]+'')
changepiece(someexercise, 10, 'uparrow')

therecommendations[someexercise]=['','','','']

}





// End 11 --------------------------







</script>
</td></tr></table>
</div>
<div id="addivtotal" style="width:100%; display:none">
<script language="Javascript">documentwrite('<table border=0 cellpadding=0 cellspacing=0 style="width:'+Math.floor(scalef*230)+'px;height:'+Math.floor(scalef*240)+'px" align=center>')</script>
<tr><td valign=middle style="vertical-align:top">
<script language="Javascript">



function showstartad()
{
if (adsrequired==2 && member(exerciseordernumber, [1,3,5,7,9,11])==true)  // set to adsrequired==2 to remove this.
{
document.getElementById('thegame').style.display = 'none'
document.getElementById('addivtotal').style.display = 'inline'
adcountdown(8)
}
else
{
document.getElementById('thegame').style.display = 'inline' 
handleclickproblem()
runonload()
}
}



function showcountdownimages(somenum)
{
for (var i=0; i<8; i++)
{
document.images['cd'+i].src='unselected.gif'
}
for (var i=0; i<somenum; i++)
{
document.images['cd'+i].src='selected.gif'
}
}

var adtimer=null
function adcountdown(somenum)
{
showcountdownimages(somenum)
if (somenum==0)
{

document.getElementById('addivtotal').style.display = 'none'
document.getElementById('thegame').style.display = 'inline' 
handleclickproblem()
runonload()

}
else
{
if (adtimer != null) {clearTimeout(adtimer)}
adtimer = setTimeout("adcountdown("+(somenum-1)+")",2000);
}
}


documentwrite('<div style="height:'+Math.floor(scalef*3)+'px"></div><table style="background-color:beige" valign=middle align=center border=1 cellpadding=0 cellspacing=0 width='+Math.floor(scalef*160)+' height='+Math.floor(scalef*100)+'><tr><td align=center><b>Trial Version</b><br><br>BrainBoxFun is available without these countdown interrupts and with up to 5 exercises per set in the full<br><b>BrainBoxFunFun</b><br>app.</td></tr></table>')


documentwrite('<br><table style="background-color:red" valign=middle align=center border=0 cellpadding=0 cellspacing=0 width='+(Math.floor(scalef*36)+Math.floor(scalef*10)+Math.floor(scalef*10))+' height='+(Math.floor(scalef*36)+Math.floor(scalef*10)+Math.floor(scalef*10))+' ><tr><td><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd1" src="selected.gif"></td><td align=center><img style="display:block"  align=center width='+Math.floor(scalef*10)+'   name="cd0" src="selected.gif"></td><td><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd7" src="selected.gif"></td></tr><tr><td valign=middle><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd2" src="selected.gif"></td><td align=center><img style="display:block"   width='+Math.floor(scalef*36)+' src="bbflogo.png" border=0></td><td valign=middle><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd6" src="selected.gif"></td></tr><tr><td><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd3" src="selected.gif"></td><td align=center><img style="display:block"  align=center width='+Math.floor(scalef*10)+'   name="cd4" src="selected.gif"></td><td><img style="display:block"  width='+Math.floor(scalef*10)+'   name="cd5" src="selected.gif"></td></tr></table>')

documentwrite('<br><table style="background-color:beige" valign=middle align=center border=1 cellpadding=0 cellspacing=0 width='+Math.floor(scalef*140)+' ><tr><td align=center>Buy it now - and check out the other apps from TopAccolades - see below</td></tr></table>')

documentwrite('<br><table style="background-color:beige" valign=middle align=center border=1 cellpadding=0 cellspacing=0 width='+Math.floor(scalef*220)+' ><tr><td align=center><span style="font-weight:bold;text-align:center">Compact Fun range<br><br><img src="cflogo.png" width='+Math.floor(scalef*36)+' align=center><br></span><dl style="text-align:left"><dt style="color:red;font-weight:bold">Compact Fun<dd>31 games and puzzles in one app.<dt style="color:red;font-weight:bold">Compact Games<dd>17 games from the Compact Fun range in one app.<dt style="color:red;font-weight:bold">Compact Puzzles<dd>15 puzzles from the Compact Fun range in one app.<dt style="color:red;font-weight:bold">Compact Words<dd>7 word-based games and puzzles from the Compact Fun range in one app.<dt style="color:red;font-weight:bold">Compact Numbers<dd>7 number-based games and puzzles from the Compact Fun range in one app.<dt style="color:red;font-weight:bold">Compact Logic<dd>5 logic puzzles from the Compact Fun range in one app.</dl></td></tr></table>')

documentwrite('<br><table style="background-color:beige" valign=middle align=center border=1 cellpadding=0 cellspacing=0 width='+Math.floor(scalef*220)+' ><tr><td align=center><span style="font-weight:bold;text-align:center">CSI Sherlock<br><br><img src="csisherlockicon.png" width='+Math.floor(scalef*50)+' align=center><br><br></span>Interactive logic game/puzzle to find who killed Vic, with what, and where.<br>&nbsp;</td></tr></table>')

</script>












</td></tr></table>


</div>
<div id="help" style="width:100%;display:none;background-color:white">
<br><script language="Javascript">documentwrite('<table align=left border=1 cellpadding=0 cellspacing=0><tr><td style="width:'+Math.floor(scalef*45)+'px;background-image:url(buttonbg.jpg);text-align:center"  onClick="togglehelp()">Back</td></tr></table>')</script>
<br><br>
<div id="help0" style="width:100%;display:block;background-color:white">

<b>BrainBoxFun Overview</b><br><br>

BrainBoxFun is a set of Brain Training Exercises that are intended to get you to use and to stretch different aspects of your brain-power, including 
memory, verbal comprehension, pattern recognition, word power, mental arithmetic, planning and mental rotation skills.<br><br>

There are ten sets of exercises, with up to <script language="Javascript">documentwrite(defaultnumberexercisesperset)</script> exercises in each set. You will score 1 point for each correct answer. </script> for each set and <script language="Javascript">documentwrite(numberexercisesperset*10)</script> in total.
<br><br>
Each exercise can be attempted at any one of 5 levels, 1-5, with 1 being considered the easiest level.
<br><br>
Every exercise has an associated time allowed.  In exercises concerned mainly with memory, the time allowed specifies the time you have to look at 
certain images or data, after which you will be asked to provide a correct answer based on your recall of this.  This second stage is not timed.  
<br><br>In other exercises, where you are given a problem to solve, the time allowed specifies the time you have 
to provide the correct answer to the problem specified.  A countdown field shows you how many seconds are remaining.
<br><br> 
For all sets of exercises, the standard time allowed for the exercises increases as the level (and hence the difficulty) increases. 
<br>
<br>
<b>The screen layout</b>
<br><br>The layout of each main page or exercise is identical.<br><br>
Below the title bar of the page or exercise is the main 11x11 graphics grid.  
The text and graphics displayed here provide you with the means of answering the question or problem, as each grid cell responds
to presses.

<br><br>
Below the graphics grid in the middle is a text field, where problems, instructions and information are shown.  <br><br>
At the bottom are three pairs of fields, which tell you about your progress and score:
<ul>
<li>The first pair, with a green background, shows the number of the current exercise set (1-10) followed by
the number of the exercise within the current set (1-<script language="Javascript">documentwrite(defaultnumberexercisesperset)</script>).
<li>The second pair, with a cyan blue background, shows the score so far for the current exercise set followed by the maximum that could have been obtained for this set if all had been completed successfully.
<li>The third pair, with a magenta background, shows the overall score so far for all the exercises (not just the current set) followed by the maximum that could have been obtained if all had been completed successfully.
</ul>
Bottom right is a countdown field with a yellow background.<br><br>
In the middle at the bottom is the <i>Go</i> button - the main button used to move through the exercises.
<br><br>
To the left of the main text field is a column that includes the letter L, which stands for Level.  In this column are a + button, a white field, and a - button.  The white field normally displays the level for the current exercise.  This can be changed using the + and - buttons.
<br><br>
Also in the L column is the &lt;&lt; (Fast Back) button.
<br><br>
To the right of the main text field is a column that includes the letter T, which stands for Time.  In this column T are a + button, a white field, and a - button.  The white field displays the time allowed for the countdown for the current exercise.  This can be changed using the + and - buttons.
<br><br>
Also in the T column is the &gt;&gt; (Fast Forward) button.
<br><br>
At the top-right of each page, in the title bar, is a ? button, which opens up Help for the page or exercise.  Press this again, or press the Back button, to return to the main screen.
<br>
<br>
There is also a duplicate Go button, a duplicate magenta total score field, and a duplicate yellow countdown field in the title bar, in case those at the bottom are hidden (likely only if you are using a very small screen).  These operate like the ones at the bottom.
<br><br>
<b>Levels and times</b>
<br><br>
An exercise may be carried out at any level from 1-5 with any countdown time from 1-99 seconds.  Both the level and the time may be changed when you are within a set of exercises, as long as you are not running one, by using the + and - buttons in the L and T columns.
<br><br>
Whenever you change a level, the countdown time allowed for that exercise is changed to the default for that level/exercise pair.
<br>
<br>
<b>Your profile</b>
<br><br>
Your profile is the means by which the system records your progress over time.  Your profile records your settings for:
<ul>
<li>The level at which a particular set of exercises is to be carried out and the countdown time available for those exercises
<li>The previous highest score for the set of exercises at the current level and countdown time defined in the profile
<li>The highest score for all exercises ever achieved
<li>The highest score for all exercises achieved for the current set of levels and countdown times
</ul>
As you move through and complete the exercises, your profile is updated.
<br><br>
If you do not have a stored profile (including if this is the first time you have used BrainBoxFun), an initial profile is set up for you when you open up the package.  The level is set to 2 for each set of exercises, and a predefined time is set for that exercise and level. Before you move away from the BrainBoxFun introduction/overview page, you have a chance to change the default level setting for all the sets of exercises through use of the + and - buttons in the L column.  Just wait until you see the default level of 2 displayed in the white field in the L column (which will appear only if you have no stored profile). You can reset your profile back to the default by pressing the red button shown on the last screen of this BrainBoxFun introduction/overview page. 
<br><br>
Whenever you change either the level or time for a particular set of exercises, the highest score achieved for that level and time is reset to 0, as is the highest score for all <script language="Javascript">documentwrite(10*numberexercisesperset)</script> exercises for the current set of levels and countdown times.
<br><br>The highest scores for each set of exercises, and for the full set of exercises, are updated, if necessary, in the profile when you reach or open up the Scores & Profile page (see its Help for more on this).
<br>
<br>
<a name="exercisesperset"></a><b>Exercises per set</b>
<br><br>You may use BrainBoxFun with up to <script language="Javascript">documentwrite(defaultnumberexercisesperset)</script> exercises in each set. If you wish to change the number of exercises per set, just wait until the last screen is shown on this page.  You will see the numbers 1 to <script language="Javascript">documentwrite(defaultnumberexercisesperset)</script> displayed, with the current number of exercises per set shown in yellow.  Press any of these numbers to change the number of exercises per set (your new setting will be shown in yellow).
<br><br>Score records only make sense for a given number of exercises per set.  So, whenever you press one of these numbers (including the one already highlighted in yellow), all score records are reset to 0.

<br>
<br>
<b>Go button and DEMO</b>
<br><br>When you have finished with the introductory BrainBoxFun page, press the Go button to move to the first set of exercises.
<br><br>At the beginning of each set of exercises, you will see a welcome page for the exercises.  This also has the word DEMO on it in red.  This emphasizes the fact that you are about to see an introduction and demonstration of the exercise.  In addition, you may also look at the Help (? button) for the exercise.
<br><br>Once you understand what is expected, press Go to begin the first exercise in the set.  You may choose to press the Go button at any time during the introduction/DEMO if you wish to skip it.
<br><br>Once an exercise has been completed, press Go.  This takes you on to the next exercise in the set, or on to the next set of exercises if you've just completed the last exercise of the set (or onto the Scores & Profile page if you've just finished the last set of exercises).  You can also press Go during an exercise.  In that case, you will also be moved on and your score for that exercise will be 0.
<br><br>You will often see the text [Go] in the main text field.  This means 'Press Go to continue'.


<br>
<br>
<b>Additional navigation</b>
<br><br>
The Go button is the usual way to move through the exercises, one at a time.  Some other navigation options are also available, in case you wish to leave some exercises out or to go back to earlier exercises:<br>
<ul>
<li>The Fast Forward button (>>) takes you to the next set of exercises (or to the Scores & Profile page if you're in set 10).
<li>The Fast Back button (<<) takes you back to the introduction/DEMO for the current set of exercises, if you're some way through them.  If you're at the introduction/DEMO for a set of exercises, it will take you back to the beginning of the previous set of exercises (or, if you are at the beginning of the first set of exercises, it will take you back to the introductory BrainBoxFun page).  
<li>You may jump to the BrainBoxFun introductory page at any time by pressing the Home icon in the title bar.  This sets your scores back to zero, so that you can start again.
</ul>
The scoring system assumes that you will work through the set of exercises from 1 through to 10.  Whenever you arrive at the introduction/Demo of a set of exercises, the scores for this set of exercises and for all sets following it are set to zero.  The scores for any sets that come before this set are left unchanged.  This means that if you jump forward to a different set and miss out some sets, those ones will have their scores left at 0.  Likewise, when you move back to an earlier set in the order, any scores you have made for sets further on are lost and are set to 0.
<br><br>
To emphasize this, however you arrive at the beginning of set 5 - even if you've completed sets 6-10 - you will see your total score as being out of <script language="Javascript">documentwrite(defaultnumberexercisesperset*4)</script> if you are using the full <script language="Javascript">documentwrite(defaultnumberexercisesperset*4)</script> exercises per set (i.e. 4 sets of <script language="Javascript">documentwrite(defaultnumberexercisesperset)</script> exercises are assumed to have been completed).
<br><br>
<i>The BrainBoxFun exercises were designed by Dr. David Wolstenholme</i>

<p style="font-weight: bold;">Terms of use</p>
<p>This software may be used for personal purposes only.&nbsp;  It may not be used for commercial purposes.</p>
<p>The software, code and script of this application may not be copied or be distributed to others.</p>
<p>The software, code and script may not be altered in any way.</p>
<p >Copyright of the software, code and script, and its
help
documentation, is held by TopAccolades Limited.&nbsp; No part of
the software,
code, script or documentation may be copied or used in another application or
document.</p>
<p >Although
every effort has been made to ensure that this software functions
as intended, TopAccolades Limited provides no warranty of
merchantability, or
fitness for a particular purpose, in relation to this application or
its
support.</p>
<p >TopAccolades
Limited shall not be liable for any damages whatsoever arising
out of the use of or inability to use this application or the
provision of
or failure
to provide support.</p>
<p style="font-style: italic;">Copyright TopAccolades Limited<br>www.topaccolades.com</p>

<br>Version: 3.0 (20170404) <br>Scale: <script language="Javascript">documentwrite(scalef)</script><br><br>&nbsp;

</div>

<div id="help1" style="width:100%;display:block;background-color:white">

<b>Exercise 1: Low-High</b><br><br>
This exercise is primarily concerned with memory.
<br><br>  
In this exercise, you will see a number of tiles displayed containing different numbers (from 1 to 9).  There will also be some blank tiles.  The countdown starts immediately, during which time you need to remember the positions of the tiles with the numbers on them.  Do not try to press on any tiles during the countdown - just memorize the order of the tiles, lowest to highest.
<br><br>
Once the countdown finishes, the numbers on the tiles disappear. You then have to press on each of the tiles that had a number on it in turn, going from the lowest to the highest.  There is no time limit for you to complete this.
<br><br>
If you make a mistake, including pressing on a blank tile, the exercise finishes immediately.  Once the exercise is over, whether you have answered correctly or not, the numbers on the tiles are exposed again.
<br><br>
The number of tiles with numbers on them and the number of blanks differ according to the level, as shown below:<br><br>

<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Numbered tiles</b></td><td align=center><b>Blank tiles</b></td></tr>
<tr><td align=center>1</td><td align=center>4</td><td align=center>1</td></tr>
<tr><td align=center>2</td><td align=center>5</td><td align=center>1</td></tr>
<tr><td align=center>3</td><td align=center>6</td><td align=center>2</td></tr>
<tr><td align=center>4</td><td align=center>7</td><td align=center>2</td></tr>
<tr><td align=center>5</td><td align=center>8</td><td align=center>2</td></tr>
</table>

</div>

<div id="help2" style="width:100%;display:block;background-color:white">

<script language="Javascript">
documentwrite('<b>Exercise 2: Rotations</b><br><br>')
documentwrite('This exercise is concerned with pattern recognition and mental rotation.')
documentwrite('<br><br>  ')
documentwrite('In this you will see a number of 3X3 square shapes, each with a central black square and tiles around this coloured white, red, orange, blue or violet.  Some of these shapes will be identical but rotated (around the central square), while the rest will be different.  Your objective is to identify all the identical, but rotated, shapes and press on these (order unimportant) before the countdown finishes.  If you wish, you may press the OK button to end the countdown early.')
documentwrite('<br><br>')
documentwrite('To explain what we mean by \'identical but rotated\', look at the following shape on the black background:')
documentwrite('<br><br>')
documentwrite('<table align=center cellspacing=0 cellpadding=0>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="orange"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="blue"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('</table>')
documentwrite('<br>')
documentwrite('The following three shapes are identical to this, but the first is rotated 90 degrees clockwise, the second 180 degrees clockwise, and the third 270 degrees clockwise.<br><br>')
documentwrite('<table align=center cellspacing=0 cellpadding=0>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="orange"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="blue"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('</table><br>')
documentwrite('<table align=center cellspacing=0 cellpadding=0>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="blue"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="orange"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('</table>')
documentwrite('<br>')
documentwrite('<table align=center cellspacing=0 cellpadding=0>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="blue"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="orange"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('</table>')
documentwrite('<br>')
documentwrite('<br>')
documentwrite('In contrast, the following shape looks similar but is not a rotation;  instead, it is what you would get if you flipped the shape over (from left to right).')
documentwrite('<br><br>')
documentwrite('<table align=center cellspacing=0 cellpadding=0>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="orange"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="red"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="white"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="blue"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="violet"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' bgcolor="black"></td></tr>')
documentwrite('</table>')
documentwrite('<br><br>')
documentwrite('The number of shapes displayed, and also the number of identical but rotated shapes, differ according to the level, as shown below.  You will be reminded of the number of identical but rotated shapes to expect in the instructions to the left of the shapes.  You need take particular care at level 2 or above, since the number of identical but rotated shapes will not be fixed.<br><br>')
documentwrite('<table align=center border=1>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*64)+' align=center><b>Level</b></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*64)+' align=center><b>Number of shapes</b></td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*64)+' align=center><b>Number of identical but rotated shapes</b></td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>1</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>4</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2</td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>5</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2 or 3</td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>3</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>6</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2, 3 or 4</td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>4</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>7</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2, 3 or 4</td></tr>')
documentwrite('<tr><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>5</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>8</td><td height='+Math.floor(scalef*16)+' width='+Math.floor(scalef*16)+' align=center>2, 3 or 4</td></tr>')
documentwrite('</table>')
</script>

</div>

<div id="help3" style="width:100%;display:block;background-color:white">
<b>Exercise 3: Jumble</b><br><br>
This exercise is concerned with word power and pattern recognition.


<br><br>  
In this exercise, the mixed-up letters of a word will be displayed on two lines.  Your objective is to identify the word that consists of these letters, and then to spell the word out by pressing on the appropriate letters, one at a time, before the countdown finishes.  As you do so, the letters will be moved down to show the word forming.  Note: when there is only one letter left, this will be moved down automatically.
<br><br>
The number of letters in the word is determined by the level:<br><br>
<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of letters</b></td></tr>
<tr><td align=center>1</td><td align=center>4</td></tr>
<tr><td align=center>2</td><td align=center>5</td></tr>
<tr><td align=center>3</td><td align=center>6</td></tr>
<tr><td align=center>4</td><td align=center>7</td></tr>
<tr><td align=center>5</td><td align=center>8</td></tr>
</table>
<br><br>
<i>About the words included and your answers</i>
<br><br>
Altogether, there are over 7000 words available for use in this exercise and in exercise 6 - words ranging in length from 4 to 9 letters.  These words were selected from over 90000 words to meet the following specification:
<ul>
<li>The words should not be anagrams of other words, meaning that you should find that only one answer is correct.
<li>The words should be found in a typical dictionary and can be spelled normally without capital letters.  This means that if you are given, in this exercise, the jumbled up letters YKES, the answer must be KEYS even though you might notice that the name SKYE, a Scottish island, can also be formed from these letters.  However, Skye must always be spelled with a capital letter, being a proper name, so is not allowed.
<li>The words can be spelled without hyphens, spaces or apostrophes.
<li>The spelling of the word should be widely recognized and used in both Britain and North America.  This means that neither the word 'COLOUR' nor the word 'COLOR', for example, will be included.  Similarly, only the '-ize' spelling of a word that can be spelled either '-ize' or '-ise' is included, since '-ise' is not normally used in North America, whereas both spellings are used in Britain and the '-ize' spelling is recommended by most British dictionaries.
</ul>
Despite our best efforts, and because language is always changing, you may find some anagrams or some other errors.  If you do, please let us know (see www.compactfun.com), so that we can change the word lists.

</div>

<div id="help4" style="width:100%;display:block;background-color:white">
<b>Exercise 4: Arithmetic</b><br><br>
This exercise is concerned with mental arithmetic skills.


<br><br>  

In each exercise you will be presented with two numbers, one under the other, and an arithmetic sign: + (top plus bottom), - (top minus bottom), x (top multiplied by bottom) or ÷ (top divided by bottom).  Your objective is to work out and submit the answer before the countdown ends. 

<br><br>
To submit the answer just press on the keys in the keypad at the bottom of the screen:
<br><br>
C clears the answer given (in case you've made an error)<br>
+/- changes the sign: it will add a minus sign at the beginning if there isn't one, or remove it if there is<br>
OK tells the system to accept your answer immediately without waiting for the countdown to end.<br>
<br>
The answer you submit is shown to the right of the = sign.  The correct answer will be shown above this and your answer will be marked as right or wrong.
<br><br>
The difficulty of the arithmetic changes according to the level.  For example, the numbers to be dealt with generally become larger as the level increases.  In addition, the complexity of the calculations increases with level through the incorporation of negative numbers, as follows:
<br><br>

<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Negative answers possible</b></td><td align=center><b>Negative input numbers possible</b></td></tr>
<tr><td align=center>1</td><td align=center>No</td><td align=center>No</td></tr>
<tr><td align=center>2</td><td align=center>No</td><td align=center>No</td></tr>
<tr><td align=center>3</td><td align=center>Yes</td><td align=center>No</td></tr>
<tr><td align=center>4</td><td align=center>Yes</td><td align=center>Yes</td></tr>
<tr><td align=center>5</td><td align=center>Yes</td><td align=center>Yes</td></tr>
</table>
<br><br>
So, do look out for negative numbers in the inputs at levels 4 and 5, and for negative answers at levels 3 and above.  If you realize the answer you've entered should be negative rather than positive, don't forget that you can press the +/- button.  This can also be pressed to change the answer from negative to positive.

</div>

<div id="help5" style="width:100%;display:block;background-color:white">
<b>Exercise 5: Sequences</b><br><br>
This exercise is concerned with pattern recognition, mental rotation and, to a lesser extent, basic mental arithmetic.


<br><br>  

In each exercise you will see 3x3 square shapes with some items on them (coloured squares, crosses, numbers or letters) around a black central number.  Four of these shapes form a sequence.  The central numbers of the sequence are always 1, 2, 3 and 4, in that order. Three of the sequence of four are always placed above the grey line, but not necessarily in order left-to-right.  The fourth in the sequence, which will have the central number that does not appear above the grey line, is one of the shapes below the grey line (which will all have the same, correct, central number).  You must press on this one before the countdown ends.
<br><br>  

The numbers, which are 0-9, follow their normal numerical order, but should be assumed to cycle endlessly, i.e. 1,2,3,4,5,6,7,8,9,0,1,2,3 ... 8,9,0,1,2,3...  Changes from one shape to the next in the sequence involve a constant increase or decrease.  So, for example, if the three shapes above the grey line have the central numbers 1, 2 and 3 and have corner squares with the numbers 3, 6, and 9, the difference from one to the next in the sequence is clearly 3.  This means that the fourth in the sequence is 3 positions above 9 in the sequence of numbers, i.e. 2.
<br><br>
The letters, which are A-Z, follow their normal alphabetical order, but, like numbers, should be assumed to cycle endlessly, i.e. A,B,C,D, ... W,X,Y,Z,A,B,C,D,...W,X,Y,Z,A,B,C,...  As, with numbers, changes from one shape to the next in the sequence involve a constant increase or decrease along this sequence of letters.  So, for example, if the three shapes above the grey line have the central numbers 1, 2 and 3 and have corner squares with the letters X, Y, and Z, the difference from one to the next in the sequence is clearly 1 letter.  This means that the fourth in the sequence is 1 position above Z in the sequence of letters, i.e. A.
<br><br>
Every number, letter, square or cross (except for the central number) also has an associated colour.  There are four colours: red, orange, blue and violet. The colours should also be assumed to cycle.  The ordering is based on the rainbow, so the colour sequence is red, orange, blue, violet, red, orange, blue, violet, ... The change in the colour of the numbers, letters, squares or crosses is also constant.  In practice, however, you don't really need to consider the colour order.  As there are only four colours, if a particular item , e.g. corner cross, above the grey line has three different colours, the missing one in the sequence must be the fourth colour. However, if the item has only two colours 
above the grey line, two of one colour and one of a second colour, the missing one in the sequence must have the second colour.
<br><br>
As well as changing colour and, in the case of numbers and letters, values, the positions of the items change through the sequence.  The items on the corner squares all rotate 90 degrees in either direction, or 180 degrees.  This means that if you see a particular corner item (a number, letter, cross or square) in three different positions above the grey line, the missing one must be in the fourth possible position.  Similarly, if two of the items above the grey line are in the same position (position A), while the other is 180 degrees opposite to this (position B), then the missing one in the sequence must also be in position B.<br><br>
The items in the middle of the edges likewise rotate through the sequence.  Please note that the rotation of the items in the corner squares is independent of the rotation of the items in the middle-edge positions.
<br><br>
Please note that there is never more than one number, letter, square or cross in a corner square.  Likewise, there is never more than one of each of these in a middle-edge square.
<br><br>
Please also note that numbers, letters, colours and positions always change; they never stay constant.
<br><br>
The complexity of the problem increases in a number of ways as the level increases: the number of items shown on the shapes; the number of shapes shown below the grey line; the maximum change for letters and numbers; and the order of the three shapes above the grey line.  This is given in the following table.<br><br>
<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>No. of items</b></td><td align=center><b>No. of shapes below line</b></td><td align=center><b>Max. change number/ letter</b></td><td align=center><b>Order above the line</b></td></tr>
<tr><td align=center>1</td><td align=center>1</td><td align=center>3</td><td align=center>2/1</td><td align=center>Always 1,2,3 (4 missing)</td></tr>
<tr><td align=center>2</td><td align=center>2</td><td align=center>3</td><td align=center>3/2</td><td align=center>Either 1,2,3 (4 missing) or 2,3,4 (1 missing)</td></tr>
<tr><td align=center>3</td><td align=center>3</td><td align=center>3</td><td align=center>4/3</td><td align=center>Any of the sequence missing, but the ones above the line are always in order</td></tr>
<tr><td align=center>4</td><td align=center>4</td><td align=center>4</td><td align=center>5/4</td><td align=center>Any of the sequence missing, with the ones above the line in any order</td></tr>
<tr><td align=center>5</td><td align=center>5</td><td align=center>5</td><td align=center>5/5</td><td align=center>Any of the sequence missing, with the ones above the line in any order</td></tr>
</table>
<br><br>
You need to be careful to check which number in the sequence is missing, and to check the order of the ones above the line.
<br><br>In the Demo for this exercise, the shapes above the line are in normal left-to-right order with central number 4 missing.  There are squares in the middle-edge positions with positions: bottom, top, and bottom.  The missing one must therefore have a square at the top.  The colours of the squares are: orange, blue, and violet.  The missing one must therefore have a red square.  <br><br>
The numbers in the corner are 5, 3, and 1, positioned bottom-left, top-left and top-right, with text colours blue, violet, red.  The values change by -2, so the missing one must be 9.  Its position must be bottom-right, and its colour must be orange.
<br><br>
The only shape that satisfies these conditions is the one just below the grey line on the far right.

</div>

<div id="help6" style="width:100%;display:block;background-color:white">
<b>Exercise 6: Back to Front</b><br><br>
This exercise is concerned with word power and pattern recognition.

<br><br>  
In this exercise, you will be presented with some sequences of letters in rows.  Your objective is to identify which row contains a letter sequence that forms a word in a typical dictionary when reversed, and to press somewhere on the letters in this row before the countdown ends. In case you accidentally press the wrong row of letters, the row you select is indicated with a grey arrow on the left.  You are able to change your selection by pressing on a different row of letters.  Once you're sure you have selected the correct row, press the OK button at the bottom to confirm.
<br><br>
Once the game ends, either because you press the OK button or because the countdown ends, the letters in each row will be reversed, to make it clearer which contained the word.  Your selection, if any, will be marked as right or wrong.  The right answer will also be indicated.
<br><br>
The number of rows shown, and the number of letters in each row, differ according to the level, as shown below:<br><br>

<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of rows</b></td><td align=center><b>Number of letters in each row</b></td></tr>
<tr><td align=center>1</td><td align=center>4</td><td align=center>5</td></tr>
<tr><td align=center>2</td><td align=center>5</td><td align=center>6</td></tr>
<tr><td align=center>3</td><td align=center>6</td><td align=center>7</td></tr>
<tr><td align=center>4</td><td align=center>7</td><td align=center>8</td></tr>
<tr><td align=center>5</td><td align=center>8</td><td align=center>9</td></tr>
</table>
<br><br>  
Please see  Help for Exercise 3 for more information about the words employed for this exercise.

</div>

<div id="help7" style="width:100%;display:block;background-color:white">
<b>Exercise 7: Iconic Memories</b><br><br>
This exercise is concerned with memory and pattern recognition.

<br><br>  
In this exercise, you will first see on the second row a sequence of images.  The countdown starts immediately, and you should try to remember the order of the images.
<br><br>
When the countdown stops, these images will disappear, and two rows lower you will see a row of question marks.  Further down is a grey line, and below this, nine image buttons.  The objective is to press these in the REVERSE order of the original images (i.e. start with the image that was on the right of the original sequence). As you press each image, the image will replace the next ?, starting from the left.  There is no time limit for this phase.
<br><br>
Once all ?s have been replaced with an image, the original sequence is displayed, and, underneath this, the original sequence in reverse (marked as correct) for you to compare your solution. Your solution will be marked as right or wrong.
<br><br>
The number of images shown differs according to the level, as shown below:<br><br>

<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of images per row</b></td></tr>
<tr><td align=center>1</td><td align=center>4</td></tr>
<tr><td align=center>2</td><td align=center>5</td></tr>
<tr><td align=center>3</td><td align=center>6</td></tr>
<tr><td align=center>4</td><td align=center>7</td></tr>
<tr><td align=center>5</td><td align=center>8</td></tr>
</table>

</div>

<div id="help8" style="width:100%;display:block;background-color:white">
<b>Exercise 8: Colour Confusion</b><br><br>
This exercise is concerned with verbal comprehension and ability to focus.


<br><br>  
In this exercise, you will see a number of words listed.  Each word is the name of one of the colours RED, ORANGE, BLUE or VIOLET.  The colour of the text is also one of these four colours - but not necessarily the colour corresponding to the name.
<br><br>
A question is posed in this window about the words displayed, the answer to which is always one of these four colours.  The question is always to give either the colour that a particular word names (Colour named by ...?) or the text colour of that word (Text colour of ...?).  Your objective is to find the answer to the question and press on the coloured square in the bottom row that matches this answer. 
<br><br>
The number of words listed varies according to the level:<br><br>
<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of words</b></td></tr>
<tr><td align=center>1</td><td align=center>5</td></tr>
<tr><td align=center>2</td><td align=center>6</td></tr>
<tr><td align=center>3</td><td align=center>7</td></tr>
<tr><td align=center>4</td><td align=center>8</td></tr>
<tr><td align=center>5</td><td align=center>9</td></tr>
</table>
<br><br>  
However, probably more important than this is the way the complexity of the description of the word in question varies with level.<br><br>
At level 1, the description is based purely on its position in the list, e.g. 
<ul>
<li>1st word starting from bottom 
<li>3rd word starting from top
</ul>
<br>
At level 2, the description is based on some quality of the word being specified, as well as an indicator of position, e.g.
<ul>
<li>2nd with red text starting from bottom 
<li>only word naming orange
<li>top word with violet text
<li>2nd word with name/text colour match starting from top
<li>3rd 6-letter word starting from bottom
</ul>  
<br>
At level 3, the description is based on the number of rows above or below some other word, which itself has a level 2 description, e.g.
<ul>
<li>word 1 row above 1st word naming red starting from top
<li>word 2 rows below 2nd word with orange text starting from top
</ul>  
<br>
At level 4, the description is always a word that is halfway between two other words, where these two words each have level 2 descriptions, e.g.
<ul>
<li>word halfway between 2nd word with red text starting from top and top word naming blue
<li>word halfway between only word with red text and 2nd word naming red starting from top
</ul>  
<br>
At level 5, the description is based on the number of rows above or below some other word, which itself has a level 4 description, e.g.
<ul>
<li>word 5 rows below word halfway between 2nd word naming orange starting from bottom and top word naming red
<li>word 1 row below word halfway between 3rd word with violet text starting from top and 1st word with name/text colour match starting from bottom
<li>word 3 rows above word halfway between top 3-letter word and 1st word naming violet starting from top
</ul> 
Notes: 
<ul>
<li>The word 'the' is omitted from these descriptions and questions.
<li>The expression 'word naming red' means the word 'RED'
<li>The expression 'name/text colour match' means a word whose text colour is the same as the colour it names.
</ul> 
<br>
Here is a fully worked example of a Level 5 exercise, which, of course, also covers the reasoning needed for the lower-level exercises.
<br><br>
The question posed is:<br><br>

Colour named by word 1 row above word halfway between 1st word with name/text colour match from top and 3rd word naming red from bottom?
<br><br>The graphical display is as follows (although here the line being described is pointed out and the correct answer is ticked at the bottom).
<br><br>
<script language="Javascript">documentwrite('<table align=center border=0><tr><td><img align=center width='+Math.floor(scalef*175)+' src="colourconfusion.gif"></td></tr></table>')</script>
<br><br>
The approach to solving a level 4 or 5 exercise is to start off by looking at the descriptions of the two base words, at the end of the overall question.
<br><br>The first description is '1st word with name/text colour match from top'.  Looking at the word list, we move down the list from the top to find the first one whose text colour matches its name.  This is RED on row 3.
<br><br>The second description is '3rd word naming red from bottom'.  Rows 1, 3 and 4 are the word RED, so the third from the bottom is the RED on row 1.
<br><br>The word that is halfway between these two (rows 1 and 3) is therefore the word on row 2.  The word that is 1 rows above this is therefore the word on row 1 (as indicated by the arrow).
<br><br>The question asks for the colour named by this word, which is red, so the colour to be pressed at the bottom is the red one.

</div>

<div id="help9" style="width:100%;display:block;background-color:white">
<b>Exercise 9: Probability</b><br><br>
This exercise is concerned with handling probability and basic mental arithmetic.


<br><br>  
In this exercise, you will see some blue tiles in one column and some green tiles to the right of these.  Each tile has a number on it.  On the far right you will see four numbers.
<br><br>
You are asked to imagine that the blue tiles are put into one bag, the green tiles into another bag, and then one tile is drawn at random from each bag.  Your objective is to work out which of the four numbers on the far right is the most probable total of the numbers on the two tiles drawn out.  You must press on this number before the countdown ends.
<br><br>
Essentially, you need to look at each of the four numbers on the right and see how many ways this total could formed by adding the face values of two tiles, one blue one and one green one.  So, given the following:
<br><br>
<script language="Javascript">documentwrite('<table align=center border=0><tr><td><img align=center width='+11*Math.floor(scalef*16)+' src="probability.gif"></td></tr></table>')</script>
<br><br>
We can see that 5 can be found in 2 ways: Blue 2 + Green 3; Blue 4 + Green 1
<br><br>
We can see that 8 can be found in 2 ways: First Blue 8 + Green 0; Second Blue 8 + Green 0
<br><br>
We can see that 9 can be found in 4 ways: First Blue 8 + Green 1; Second Blue 8 + Green 1; Blue 9 + Green 0; Blue 4 + Green 5
<br><br>
We can see that 7 can be found in 2 ways: Blue 4 + Green 3; Blue 2 + Green 5.
<br><br>
The number 9 can therefore for formed in more ways than the others, so this is the correct answer.
<br><br>

The number of tiles of each colour varies according to the level:<br><br>
<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of tiles</b></td></tr>
<tr><td align=center>1</td><td align=center>3</td></tr>
<tr><td align=center>2</td><td align=center>4</td></tr>
<tr><td align=center>3</td><td align=center>5</td></tr>
<tr><td align=center>4</td><td align=center>6</td></tr>
<tr><td align=center>5</td><td align=center>7</td></tr>
</table>
</div>

<div id="help10" style="width:100%;display:block;background-color:white">
<b>Exercise 10: Picnic</b><br><br>
This exercise is concerned with assimilation of information and planning.

<br><br>  
In this exercise, you see a block of items for a picnic at the top.  Directly beneath this is a picnic area (three red and white checked squares).  Further down is a question mark together with a number of different items required for the picnic.
<br><br>
Starting at the top row, collect an item from each row in turn before ending up next to the picnic area.  You collect an item by pressing on the square containing it.  You must collect each of the required items plus one additional item (different from the others you're asked to collect) before the countdown finishes.
<br><br>
At each stage, the next item must be directly below or diagonally touching the previous one.  The item from the bottom row of the block must, similarly, be directly above or diagonally adjacent to a picnic area square.  
<br><br>
In the example completed exercise shown next, the item selected in the top row was the pizza.  The constraint that the next item must be directly below or diagonally adjacent to this means that the only items that could have been selected in the second row were the the carrot, the banana or the sandwich.  We selected the banana.
<br><br>In row 4, we selected the tomato as our unspecified different item.  <br><br>
The constraint that the item selected from the bottom row must be adjacent (vertically or diagonally) to the picnic area means that you should always avoid selecting from the two items found at either end of the bottom row and also the items at either end of the row above that, as you cannot reach the picnic area from these squares.  In the example, we select the pear which is diagonally adjacent to the picnic area.
<br><br>
<script language="Javascript">documentwrite('<table align=center border=0><tr><td><img align=center width='+11*Math.floor(scalef*16)+' src="picnic.gif"></td></tr></table>')</script>
<br><br>This picture shows a complete successful path (tiles with grey backgrounds).  The required items collected are shown in the picture above the corresponding required items at the bottom, and the additional item collected, a tomato, is shown above the question mark.
<br><br>If you accidentally collect the wrong item at any point, press the up-arrow icon (at the bottom in the middle).  This deselects the last item collected by removing it from the collection at the bottom and removing the highlighting.  You can use the up-arrow to go back more than one step. 
<br><br>If you try to select an item you have already collected, or an additional unspecified item, or an item that doesn't meet the vertical or diagonal criteria, the system prevents you.  Again, you can use the up-arrow icon to retrace your steps if necessary.
<br><br>Once the exercise is over, the system informs you of the number of possible paths you could have taken.  If you fail to collect all the items before the countdown finishes, the system shows you one possible path (marked in grey) after a short while.
<br><br>
The number of items to be collected (and the number of rows of items, which is the same), varies according to the level:<br><br>
<table align=center border=1>
<tr><td align=center><b>Level</b></td><td align=center><b>Number of items to be collected (or rows)</b></td></tr>
<tr><td align=center>1</td><td align=center>3</td></tr>
<tr><td align=center>2</td><td align=center>4</td></tr>
<tr><td align=center>3</td><td align=center>5</td></tr>
<tr><td align=center>4</td><td align=center>6</td></tr>
<tr><td align=center>5</td><td align=center>7</td></tr>
</table>
</div>

<div id="help11" style="width:100%;display:block;background-color:white">
<b>Scores & Profile</b>
<br><br>
Whenever you open up the Scores & Profile page, your scores achieved for the complete set of exercises are displayed.
<br><br>
In the top left corner of the main graphical display, your total score is displayed on a red background.
<br><br>
Below this, for each numbered set of exercises (numbers in blue text), the score (green text), the level and the countdown time are given.
<br><br>
On either side of the level and countdown settings are up-arrows and down-arrows, which, respectively, allow you to increase or decrease the levels and times.
<br><br>
Based on your scores for the individual sets of exercises, the system may make some recommendations about changes to your profile.  For example, if you've scored full marks for a set, it will normally recommend that you move up a level,  or, if you've scored 0 for a set, it will normally recommend that you move down a level.  If moving up or down isn't possible, it will recommend a decrease or increase in time.  If your time setting isn't the standard for that exercise, then, rather than recommend a change in level, it will recommend a change in time, to move you back to the standard. The recommendations are shown by orange arrows. You may accept the recommendations individually, by pressing on the orange arrow, or all together, by pressing the OK button.
<br><br>
At this time, the system also inspects the scores for the 10 sets of exercises, and the totals, and updates your profile with these, if they exceed your previous highest scores.  For the complete set of exercises two highest scores are recorded in your profile:
<ul>
<li>the highest total score ever (since you've been using the current number of exercises per set) - whatever your profile is
<li>the highest total score (since you've been using the current number of exercises per set) for the current profile - i.e. since your profile was last changed in any way through changes in levels and/or times.
</ul>
Your highest total ever is shown in the main text field, together with your current total.  
<br><br>
After a while, the text changes to display the high scores for your profile.  First, the overall total high score for the current profile is displayed, followed by a table showing the high scores for each individual exercise since you last changed the level or countdown time for that exercise.  Please note that the profile total high score shown is not necessarily the same as the sum of the individual exercise high scores.  This is because the profile total high score is reset to zero whenever you change the level or countdown time for an individual exercise (since you now have a different profile), whereas only the exercise high score of the one you're changing is reset to zero while all the other individual exercise high scores are left untouched.
<br><br>
Reminder: whenever you change the number of exercises per set, all high scores and totals are reset to zero, since they are relevant only for a certain number of exercises per set.
<br>
<br>

<b>Starting again</b>
<br><br>
To start a new set of exercises, in which the scores are reset to zero for all sets of exercises, 
press the Go button, the Fast Forward button (&gt;&gt;), or press the Home icon in the title bar.  Any other change of page, such as Fast Back (&lt;&lt;), keeps you in the current set of exercises and does not reset scores to zero. 
</div>
<br>&nbsp;

</div>


</td></tr>
<tr><td style="background-color:black">
<script language="Javascript">documentwrite('<div id="theimages" style="height:'+Math.floor(scalef*12)+'px;overflow:hidden;background-color:black" onClick="openwebpage(\'http://i.compactfun.com/\')">');

function openwebpage(someurl)
{
document.location.href=someurl
}

var baseonelinermessages=[
'Press ? for Help', '', 
'TopAccolades Limited',
'Specializing in Original & Classic...',
'Game & Puzzle Apps',
'']

var admessages=[
'<span style="color:magenta">Go to i.compactfun.com</span>',
'<span style="color:magenta">Play many of our apps online.</span>',
'<span style="color:magenta">Also download apps to install.</span>',
'<span style="color:magenta">More details follow...</span>',
'',
'<span style="color:cyan">Try our Linxem app</span>',
'<span style="color:cyan">A great new word game.</span>',
'<span style="color:cyan">30 words presented to setter.</span>',
'<span style="color:cyan">Setter selects 2 or more of these...</span>',
'<span style="color:cyan">...and a new word that links them.</span>',
'<span style="color:cyan">The linking word is called the Linxem</span>',
'<span style="color:cyan">Solver presented with the Linxem...</span>',
'<span style="color:cyan">... and same 30 words...</span>',
'<span style="color:cyan">... and must identify selected words.</span>',
'<span style="color:cyan">Try Linxem - Linxem Trial is free</span>',
'',
'<span style="color:cyan">Try our Volcano app</span>',
'<span style="color:cyan">Like Volcano in this app...</span>',
'<span style="color:cyan">... but new interface, gestures...</span>',
'<span style="color:cyan">... and game state memory.</span>',
'<span style="color:cyan">Try Volcano - Volcano Trial is free</span>',
'',
'<span style="color:violet">For Birthdays & Anniversaries...</span>',
'<span style="color:violet">For Valentine\'s Day...</span>',
'<span style="color:violet">For Mother\'s & Father\'s Days...</span>',
'<span style="color:violet">Try with-my-love.com</span>',
'<span style="color:violet">Make the day really special!</span>',
'<span style="color:violet">We have web sites such as...</span>',
'<span style="color:violet">best-wife.in-the-whole.world</span>',
'<span style="color:violet">sexiest-lover.in-the.land</span>',
'<span style="color:violet">best-husband.in-the-whole.world</span>',
'<span style="color:violet">best-lover.in-the.land</span>',
'<span style="color:violet">supremely.sexy, just-so.sexy</span>',
'<span style="color:violet">best-dad.in-the-whole.world</span>',
'<span style="color:violet">best-mother.in-the.land</span>',
'<span style="color:violet">best-in-the.world</span>',
'<span style="color:violet">... and many more.</span>',
'<span style="color:violet">Supply a loved one\'s name...</span>',
'<span style="color:violet">...to have a page such as...</span>',
'<span style="color:violet">jane-smith-best-wife.in-the.land</span>',
'<span style="color:violet">harry-styles.just-so.sexy</span>',
'<span style="color:violet">laura-brown.best-in-the.world</span>',
'<span style="color:violet">Go to with-my-love.com...</span>',
'<span style="color:violet">...and make their day.</span>',
'',
'<span style="color:red">Sherlock is at the Bates Hotel</span>',
'<span style="color:red">Vic has been murdered</span>',
'<span style="color:red">Who killed Vic?</span>',
'<span style="color:red">With what?  And where?</span>',
'<span style="color:red">Ask Sherlock for clues...</span>',
'<span style="color:red">Then try to solve them</span>',
'<span style="color:red">Try our great, free logic puzzle...</span>',
'<span style="color:red">Who Killed Vic?</span>',
'',
'<span style="color:magenta">Play Rummy against the system...</span>',
'<span style="color:magenta">...or against a friend</span>',
'<span style="color:magenta">Full animation of deals and moves</span>',
'<span style="color:magenta">Game state remembered on exit</span>',
'<span style="color:magenta">Try our free Rummy 7 app</span>',
'',
'<span style="color:cyan">Try our Kublitz Cube app</span>',
'<span style="color:cyan">Turn the layers to get...</span>',
'<span style="color:cyan">...the same colour on each side</span>',
'<span style="color:cyan">Guidance on solving the Cube</span>',
'<span style="color:cyan">Notation and mnemonics</span>',
'<span style="color:cyan">Kublitz Cube - it\'s free</span>',
'',
'<span style="color:magenta">Try our Peg Solitaire app</span>',
'<span style="color:magenta">Play with the full 32 pegs...</span>',
'<span style="color:magenta">...or start with fewer pegs </span>',
'<span style="color:magenta">Notation and mnemonics...</span>',
'<span style="color:magenta">...to remember the solution</span>',
'<span style="color:magenta">Peg Solitaire - it\'s free</span>',
'',
'<span style="color:lime">Try our Xword4x4 app</span>',
'<span style="color:lime">Crossword game for 2-4 players</span>',
'<span style="color:lime">Pass and Play mode</span>',
'<span style="color:lime">No internet connection required</span>',
'<span style="color:lime">You can even design the layout</span>',
'<span style="color:lime">Or change letter numbers/values</span>',
'<span style="color:lime">Try our free <span style="color:white">Xword4x4</span> app</span>',
'',
'<span style="color:cyan">Download our Word Ladder app</span>',
'<span style="color:cyan">One word at the top...</span>',
'<span style="color:cyan">...one at the bottom.</span>',
'<span style="color:cyan">Fill in the 4 blank words in between...</span>',
'<span style="color:cyan">...changing one letter at a time.</span>',
'<span style="color:cyan">Word Ladder (TopAccolades) - free</span>',
'',
'<span style="color:cyan">Download our Flagalot app</span>',
'<span style="color:cyan">A memory game  based around flags.</span>',
'<span style="color:cyan">4-9 flags/card depending on level.</span>',
'<span style="color:cyan">Tap on the flag on this & last card.</span>',
'<span style="color:cyan">Flagalot - it\'s free</span>',
'',
'<span style="color:lime">Try our Compact Fun app</span>',
'<span style="color:lime">31 games and puzzles in one app</span>',
'<span style="color:lime">Compact Fun has games such as...</span>',
'<span style="color:lime">Rummy, 4-in-a-line...</span>',
'<span style="color:lime">Hangman, Mancala...</span>',
'<span style="color:lime">Letters Game, Numbers Game...</span>',
'<span style="color:lime">& more classic & original games</span>',
'<span style="color:lime">Compact Fun has puzzles such as...</span>',
'<span style="color:lime">Sudoku, Hangman...</span>',
'<span style="color:lime">Peg Solitaire, Step Challenge...</span>',
'<span style="color:lime">WordSearch & other word puzzles...</span>',
'<span style="color:lime">Numberskull & other number puzzles...</span>',
'<span style="color:lime">Memory Pairs (Pelmanism)...</span>',
'<span style="color:lime">& more classic & original puzzles</span>',
'<span style="color:lime">Buy our <span style="color:white">Compact Puzzles</span> app now</span>',
''

]

if (adsrequired==1) {baseonelinermessages=baseonelinermessages.concat(admessages)}

var onelinermessages=baseonelinermessages
documentwrite('<div id="oneliner" style="font-size='+Math.floor(scalef*9)+'px;text-align:center;font-weight:bold;color:white;background-color:black; width:100%">'+onelinermessages[0]+'</div><br><br>&nbsp;')
var clickproblemtimer=null
function handleclickproblem()
{
if (clickproblemtimer != null) {clearTimeout(clickproblemtimer)}
clickproblemtimer=setTimeout("modifyoneliner()",50);

}

function modifyoneliner()
{
changetextvalue('oneliner', document.getElementById('oneliner').innerHTML)
// document.getElementById('oneliner').innerHTML = document.getElementById('oneliner').innerHTML 
}

currentoneliner=0
function changeoneliner()
{
currentoneliner++
if (currentoneliner==onelinermessages.length) {currentoneliner=0}
changetextvalue('oneliner', onelinermessages[currentoneliner])
// document.getElementById('oneliner').innerHTML = onelinermessages[currentoneliner]
if (onelinertimer != null) {clearTimeout(onelinertimer)}
onelinertimer=setTimeout("changeoneliner()",5000);

}
var onelinertimer=null
onelinertimer=setTimeout("changeoneliner()",5000);

</script></div></td></tr></table></div></body></html>